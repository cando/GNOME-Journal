/* loading.c generated by valac 0.16.0, the Vala compiler
 * generated from loading.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <clutter-gtk/clutter-gtk.h>
#include <gtk/gtk.h>
#include <clutter/clutter.h>
#include <gio/gio.h>
#include <float.h>
#include <math.h>
#include <gee.h>
#include <zeitgeist.h>
#include <gdk/gdk.h>
#include <cairo.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <pango/pango.h>
#include <stdlib.h>
#include <string.h>


#define JOURNAL_TYPE_LOADING_ACTOR (journal_loading_actor_get_type ())
#define JOURNAL_LOADING_ACTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_LOADING_ACTOR, JournalLoadingActor))
#define JOURNAL_LOADING_ACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_LOADING_ACTOR, JournalLoadingActorClass))
#define JOURNAL_IS_LOADING_ACTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_LOADING_ACTOR))
#define JOURNAL_IS_LOADING_ACTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_LOADING_ACTOR))
#define JOURNAL_LOADING_ACTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_LOADING_ACTOR, JournalLoadingActorClass))

typedef struct _JournalLoadingActor JournalLoadingActor;
typedef struct _JournalLoadingActorClass JournalLoadingActorClass;
typedef struct _JournalLoadingActorPrivate JournalLoadingActorPrivate;

#define JOURNAL_TYPE_APP (journal_app_get_type ())
#define JOURNAL_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_APP, JournalApp))
#define JOURNAL_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_APP, JournalAppClass))
#define JOURNAL_IS_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_APP))
#define JOURNAL_IS_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_APP))
#define JOURNAL_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_APP, JournalAppClass))

typedef struct _JournalApp JournalApp;
typedef struct _JournalAppClass JournalAppClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _JournalAppPrivate JournalAppPrivate;

#define JOURNAL_TYPE_ZEITGEIST_BACKEND (journal_zeitgeist_backend_get_type ())
#define JOURNAL_ZEITGEIST_BACKEND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_ZEITGEIST_BACKEND, JournalZeitgeistBackend))
#define JOURNAL_ZEITGEIST_BACKEND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_ZEITGEIST_BACKEND, JournalZeitgeistBackendClass))
#define JOURNAL_IS_ZEITGEIST_BACKEND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_ZEITGEIST_BACKEND))
#define JOURNAL_IS_ZEITGEIST_BACKEND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_ZEITGEIST_BACKEND))
#define JOURNAL_ZEITGEIST_BACKEND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_ZEITGEIST_BACKEND, JournalZeitgeistBackendClass))

typedef struct _JournalZeitgeistBackend JournalZeitgeistBackend;
typedef struct _JournalZeitgeistBackendClass JournalZeitgeistBackendClass;

#define TYPE_SIDE (side_get_type ())

#define JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW (journal_clutter_round_box_view_get_type ())
#define JOURNAL_CLUTTER_ROUND_BOX_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW, JournalClutterRoundBoxView))
#define JOURNAL_CLUTTER_ROUND_BOX_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW, JournalClutterRoundBoxViewClass))
#define JOURNAL_IS_CLUTTER_ROUND_BOX_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW))
#define JOURNAL_IS_CLUTTER_ROUND_BOX_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW))
#define JOURNAL_CLUTTER_ROUND_BOX_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW, JournalClutterRoundBoxViewClass))

typedef struct _JournalClutterRoundBoxView JournalClutterRoundBoxView;
typedef struct _JournalClutterRoundBoxViewClass JournalClutterRoundBoxViewClass;
typedef struct _JournalClutterRoundBoxViewPrivate JournalClutterRoundBoxViewPrivate;

#define JOURNAL_TYPE_ACTIVITY_MODEL (journal_activity_model_get_type ())
#define JOURNAL_ACTIVITY_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_ACTIVITY_MODEL, JournalActivityModel))
#define JOURNAL_ACTIVITY_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_ACTIVITY_MODEL, JournalActivityModelClass))
#define JOURNAL_IS_ACTIVITY_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_ACTIVITY_MODEL))
#define JOURNAL_IS_ACTIVITY_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_ACTIVITY_MODEL))
#define JOURNAL_ACTIVITY_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_ACTIVITY_MODEL, JournalActivityModelClass))

typedef struct _JournalActivityModel JournalActivityModel;
typedef struct _JournalActivityModelClass JournalActivityModelClass;

#define JOURNAL_TYPE_TIMELINE (journal_timeline_get_type ())
#define JOURNAL_TIMELINE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_TIMELINE, JournalTimeline))
#define JOURNAL_TIMELINE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_TIMELINE, JournalTimelineClass))
#define JOURNAL_IS_TIMELINE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_TIMELINE))
#define JOURNAL_IS_TIMELINE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_TIMELINE))
#define JOURNAL_TIMELINE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_TIMELINE, JournalTimelineClass))

typedef struct _JournalTimeline JournalTimeline;
typedef struct _JournalTimelineClass JournalTimelineClass;

#define JOURNAL_TYPE_GENERIC_ACTIVITY (journal_generic_activity_get_type ())
#define JOURNAL_GENERIC_ACTIVITY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_GENERIC_ACTIVITY, JournalGenericActivity))
#define JOURNAL_GENERIC_ACTIVITY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_GENERIC_ACTIVITY, JournalGenericActivityClass))
#define JOURNAL_IS_GENERIC_ACTIVITY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_GENERIC_ACTIVITY))
#define JOURNAL_IS_GENERIC_ACTIVITY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_GENERIC_ACTIVITY))
#define JOURNAL_GENERIC_ACTIVITY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_GENERIC_ACTIVITY, JournalGenericActivityClass))

typedef struct _JournalGenericActivity JournalGenericActivity;
typedef struct _JournalGenericActivityClass JournalGenericActivityClass;

#define JOURNAL_TYPE_ROUND_BOX (journal_round_box_get_type ())
#define JOURNAL_ROUND_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_ROUND_BOX, JournalRoundBox))
#define JOURNAL_ROUND_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_ROUND_BOX, JournalRoundBoxClass))
#define JOURNAL_IS_ROUND_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_ROUND_BOX))
#define JOURNAL_IS_ROUND_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_ROUND_BOX))
#define JOURNAL_ROUND_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_ROUND_BOX, JournalRoundBoxClass))

typedef struct _JournalRoundBox JournalRoundBox;
typedef struct _JournalRoundBoxClass JournalRoundBoxClass;

#define JOURNAL_TYPE_ROUND_BOX_CONTENT (journal_round_box_content_get_type ())
#define JOURNAL_ROUND_BOX_CONTENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_ROUND_BOX_CONTENT, JournalRoundBoxContent))
#define JOURNAL_ROUND_BOX_CONTENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_ROUND_BOX_CONTENT, JournalRoundBoxContentClass))
#define JOURNAL_IS_ROUND_BOX_CONTENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_ROUND_BOX_CONTENT))
#define JOURNAL_IS_ROUND_BOX_CONTENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_ROUND_BOX_CONTENT))
#define JOURNAL_ROUND_BOX_CONTENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_ROUND_BOX_CONTENT, JournalRoundBoxContentClass))

typedef struct _JournalRoundBoxContent JournalRoundBoxContent;
typedef struct _JournalRoundBoxContentClass JournalRoundBoxContentClass;

#define JOURNAL_TYPE_GTK_ROUND_BOX_VIEW (journal_gtk_round_box_view_get_type ())
#define JOURNAL_GTK_ROUND_BOX_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW, JournalGtkRoundBoxView))
#define JOURNAL_GTK_ROUND_BOX_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW, JournalGtkRoundBoxViewClass))
#define JOURNAL_IS_GTK_ROUND_BOX_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW))
#define JOURNAL_IS_GTK_ROUND_BOX_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW))
#define JOURNAL_GTK_ROUND_BOX_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW, JournalGtkRoundBoxViewClass))

typedef struct _JournalGtkRoundBoxView JournalGtkRoundBoxView;
typedef struct _JournalGtkRoundBoxViewClass JournalGtkRoundBoxViewClass;
typedef struct _JournalGtkRoundBoxViewPrivate JournalGtkRoundBoxViewPrivate;
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
typedef struct _JournalTimelinePrivate JournalTimelinePrivate;
typedef struct _JournalRoundBoxPrivate JournalRoundBoxPrivate;
typedef struct _JournalRoundBoxContentPrivate JournalRoundBoxContentPrivate;
typedef struct _Block3Data Block3Data;
#define _pango_attribute_destroy0(var) ((var == NULL) ? NULL : (var = (pango_attribute_destroy (var), NULL)))
#define _pango_font_description_free0(var) ((var == NULL) ? NULL : (var = (pango_font_description_free (var), NULL)))
#define _pango_attr_list_unref0(var) ((var == NULL) ? NULL : (var = (pango_attr_list_unref (var), NULL)))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

struct _JournalLoadingActor {
	GObject parent_instance;
	JournalLoadingActorPrivate * priv;
};

struct _JournalLoadingActorClass {
	GObjectClass parent_class;
};

struct _JournalLoadingActorPrivate {
	JournalApp* app;
	GtkClutterActor* gtk_actor_box;
	GtkClutterActor* gtk_actor_throbber;
	GtkBox* box;
	GtkSpinner* throbber;
};

struct _JournalApp {
	GObject parent_instance;
	JournalAppPrivate * priv;
	GtkApplicationWindow* window;
	GtkNotebook* notebook;
	GtkBox* main_box;
	GtkClutterEmbed* embed;
	ClutterStage* stage;
	ClutterActor* box;
	GSimpleAction* action_fullscreen;
	guint duration;
};

struct _JournalAppClass {
	GObjectClass parent_class;
};

typedef enum  {
	SIDE_TOP,
	SIDE_LEFT,
	SIDE_RIGHT,
	SIDE_BOTTOM
} Side;

struct _JournalClutterRoundBoxView {
	GtkBox parent_instance;
	JournalClutterRoundBoxViewPrivate * priv;
};

struct _JournalClutterRoundBoxViewClass {
	GtkBoxClass parent_class;
};

struct _JournalClutterRoundBoxViewPrivate {
	JournalActivityModel* model;
	JournalApp* app;
	ClutterStage* stage;
	ClutterActor* viewport;
	ClutterActor* timeline;
	JournalTimeline* timeline_gtk;
};

struct _JournalGtkRoundBoxView {
	GtkLayout parent_instance;
	JournalGtkRoundBoxViewPrivate * priv;
};

struct _JournalGtkRoundBoxViewClass {
	GtkLayoutClass parent_class;
};

struct _JournalGtkRoundBoxViewPrivate {
	JournalActivityModel* model;
	JournalApp* app;
	GeeArrayList* point_circle;
	gint total_height;
};

struct _JournalTimeline {
	GtkDrawingArea parent_instance;
	JournalTimelinePrivate * priv;
};

struct _JournalTimelineClass {
	GtkDrawingAreaClass parent_class;
};

struct _JournalTimelinePrivate {
	GeeArrayList* point_circle;
};

struct _JournalRoundBox {
	GtkFrame parent_instance;
	JournalRoundBoxPrivate * priv;
};

struct _JournalRoundBoxClass {
	GtkFrameClass parent_class;
};

struct _JournalRoundBoxPrivate {
	Side _arrowSide;
	gint _arrowOrigin;
};

struct _JournalRoundBoxContent {
	GtkDrawingArea parent_instance;
	JournalRoundBoxContentPrivate * priv;
};

struct _JournalRoundBoxContentClass {
	GtkDrawingAreaClass parent_class;
};

struct _JournalRoundBoxContentPrivate {
	JournalGenericActivity* activity;
	GdkPixbuf* thumb;
	gboolean is_thumb;
	PangoLayout* title_layout;
	PangoLayout* time_layout;
};

struct _Block3Data {
	int _ref_count_;
	JournalRoundBoxContent * self;
	JournalGenericActivity* activity;
};


static gpointer journal_loading_actor_parent_class = NULL;
static gpointer journal_clutter_round_box_view_parent_class = NULL;
static gpointer journal_gtk_round_box_view_parent_class = NULL;
static gpointer journal_timeline_parent_class = NULL;
static gpointer journal_round_box_parent_class = NULL;
extern gint journal_round_box_BORDER_WIDTH;
gint journal_round_box_BORDER_WIDTH = 10;
static gpointer journal_round_box_content_parent_class = NULL;

GType journal_loading_actor_get_type (void) G_GNUC_CONST;
GType journal_app_get_type (void) G_GNUC_CONST;
#define JOURNAL_LOADING_ACTOR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_LOADING_ACTOR, JournalLoadingActorPrivate))
enum  {
	JOURNAL_LOADING_ACTOR_DUMMY_PROPERTY
};
JournalLoadingActor* journal_loading_actor_new (JournalApp* app);
JournalLoadingActor* journal_loading_actor_construct (GType object_type, JournalApp* app);
GType journal_zeitgeist_backend_get_type (void) G_GNUC_CONST;
JournalZeitgeistBackend* journal_app_get_backend (JournalApp* self);
static void __lambda6_ (JournalLoadingActor* self);
void journal_loading_actor_stop (JournalLoadingActor* self);
static void ___lambda6__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self);
void journal_loading_actor_start (JournalLoadingActor* self);
static void journal_loading_actor_finalize (GObject* obj);
GType side_get_type (void) G_GNUC_CONST;
GType journal_clutter_round_box_view_get_type (void) G_GNUC_CONST;
GType journal_activity_model_get_type (void) G_GNUC_CONST;
GType journal_timeline_get_type (void) G_GNUC_CONST;
#define JOURNAL_CLUTTER_ROUND_BOX_VIEW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW, JournalClutterRoundBoxViewPrivate))
enum  {
	JOURNAL_CLUTTER_ROUND_BOX_VIEW_DUMMY_PROPERTY
};
JournalClutterRoundBoxView* journal_clutter_round_box_view_new (JournalApp* app);
JournalClutterRoundBoxView* journal_clutter_round_box_view_construct (GType object_type, JournalApp* app);
JournalActivityModel* journal_activity_model_new (void);
JournalActivityModel* journal_activity_model_construct (GType object_type);
static void __lambda8_ (JournalClutterRoundBoxView* self);
void journal_clutter_round_box_view_load_events (JournalClutterRoundBoxView* self);
static void ___lambda8__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self);
JournalTimeline* journal_timeline_new (void);
JournalTimeline* journal_timeline_construct (GType object_type);
static gboolean __lambda10_ (JournalClutterRoundBoxView* self, ClutterScrollEvent* e);
static gboolean ___lambda10__clutter_actor_scroll_event (ClutterActor* _sender, ClutterScrollEvent* event, gpointer self);
GeeArrayList* journal_zeitgeist_backend_get_all_activities (JournalZeitgeistBackend* self);
JournalGenericActivity* journal_generic_activity_new (ZeitgeistEvent* event);
JournalGenericActivity* journal_generic_activity_construct (GType object_type, ZeitgeistEvent* event);
GType journal_generic_activity_get_type (void) G_GNUC_CONST;
void journal_activity_model_add_activity (JournalActivityModel* self, JournalGenericActivity* activity);
JournalRoundBox* journal_round_box_new (Side side);
JournalRoundBox* journal_round_box_construct (GType object_type, Side side);
GType journal_round_box_get_type (void) G_GNUC_CONST;
JournalRoundBoxContent* journal_round_box_content_new (JournalGenericActivity* activity);
JournalRoundBoxContent* journal_round_box_content_construct (GType object_type, JournalGenericActivity* activity);
GType journal_round_box_content_get_type (void) G_GNUC_CONST;
void journal_timeline_add_circle (JournalTimeline* self, gint y);
static void journal_clutter_round_box_view_finalize (GObject* obj);
GType journal_gtk_round_box_view_get_type (void) G_GNUC_CONST;
#define JOURNAL_GTK_ROUND_BOX_VIEW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_GTK_ROUND_BOX_VIEW, JournalGtkRoundBoxViewPrivate))
enum  {
	JOURNAL_GTK_ROUND_BOX_VIEW_DUMMY_PROPERTY
};
#define JOURNAL_GTK_ROUND_BOX_VIEW_len_arrow 20
#define JOURNAL_GTK_ROUND_BOX_VIEW_arrow_origin 30
#define JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width 2
#define JOURNAL_GTK_ROUND_BOX_VIEW_radius 6
JournalGtkRoundBoxView* journal_gtk_round_box_view_new (JournalApp* app);
JournalGtkRoundBoxView* journal_gtk_round_box_view_construct (GType object_type, JournalApp* app);
static void __lambda11_ (JournalGtkRoundBoxView* self);
static void journal_gtk_round_box_view_setup_ui (JournalGtkRoundBoxView* self);
static void ___lambda11__gtk_widget_realize (GtkWidget* _sender, gpointer self);
static gboolean __lambda12_ (JournalGtkRoundBoxView* self);
static void journal_gtk_round_box_view_adjust_ui (JournalGtkRoundBoxView* self);
static gboolean ___lambda12__gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self);
static gboolean __lambda13_ (JournalGtkRoundBoxView* self);
static gboolean ___lambda13__gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self);
static void __lambda14_ (JournalGtkRoundBoxView* self);
void journal_gtk_round_box_view_load_events (JournalGtkRoundBoxView* self);
static void ___lambda14__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self);
static void journal_gtk_round_box_view_add_circle (JournalGtkRoundBoxView* self, gint y);
static gboolean journal_gtk_round_box_view_real_draw (GtkWidget* base, cairo_t* ctx);
void journal_utils_gdk_rgba_to_clutter_color (GdkRGBA* gdk_rgba, ClutterColor* result);
GeeArrayList* journal_activity_model_get_activities (JournalActivityModel* self);
Side journal_round_box_get_arrow_side (JournalRoundBox* self);
static void journal_gtk_round_box_view_real_get_preferred_height (GtkWidget* base, gint* minimum_height, gint* natural_height);
static void journal_gtk_round_box_view_finalize (GObject* obj);
#define JOURNAL_TIMELINE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_TIMELINE, JournalTimelinePrivate))
enum  {
	JOURNAL_TIMELINE_DUMMY_PROPERTY
};
#define JOURNAL_TIMELINE_len_arrow 20
#define JOURNAL_TIMELINE_arrow_origin 30
#define JOURNAL_TIMELINE_timeline_width 2
#define JOURNAL_TIMELINE_radius 6
static gboolean journal_timeline_real_draw (GtkWidget* base, cairo_t* ctx);
static GtkSizeRequestMode journal_timeline_real_get_request_mode (GtkWidget* base);
static void journal_timeline_real_get_preferred_width (GtkWidget* base, gint* min_width, gint* nat_width);
static void journal_timeline_finalize (GObject* obj);
#define JOURNAL_ROUND_BOX_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_ROUND_BOX, JournalRoundBoxPrivate))
enum  {
	JOURNAL_ROUND_BOX_DUMMY_PROPERTY,
	JOURNAL_ROUND_BOX_ARROW_SIDE
};
static gboolean journal_round_box_real_draw (GtkWidget* base, cairo_t* ctx);
static GtkSizeRequestMode journal_round_box_real_get_request_mode (GtkWidget* base);
static void journal_round_box_real_get_preferred_width (GtkWidget* base, gint* min_width, gint* nat_width);
static void journal_round_box_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* min_height, gint* nat_height);
static void journal_round_box_finalize (GObject* obj);
static void _vala_journal_round_box_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
#define JOURNAL_ROUND_BOX_CONTENT_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), JOURNAL_TYPE_ROUND_BOX_CONTENT, JournalRoundBoxContentPrivate))
enum  {
	JOURNAL_ROUND_BOX_CONTENT_DUMMY_PROPERTY
};
#define JOURNAL_ROUND_BOX_CONTENT_DEFAULT_WIDTH 400
#define JOURNAL_ROUND_BOX_CONTENT_x_padding 5
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
GdkPixbuf* journal_generic_activity_get_type_icon (JournalGenericActivity* self);
static void __lambda9_ (Block3Data* _data3_);
GdkPixbuf* journal_generic_activity_get_thumb_icon (JournalGenericActivity* self);
static void ___lambda9__journal_generic_activity_thumb_loaded (JournalGenericActivity* _sender, JournalGenericActivity* activity, gpointer self);
static gboolean journal_round_box_content_real_draw (GtkWidget* base, cairo_t* cr);
static void journal_round_box_content_create_title_layout (JournalRoundBoxContent* self, gint width);
const gchar* journal_generic_activity_get_title (JournalGenericActivity* self);
static void journal_round_box_content_create_time_layout (JournalRoundBoxContent* self, gint width);
gint64 journal_generic_activity_get_time (JournalGenericActivity* self);
static GtkSizeRequestMode journal_round_box_content_real_get_request_mode (GtkWidget* base);
static void journal_round_box_content_real_get_preferred_width (GtkWidget* base, gint* minimum_width, gint* natural_width);
static void journal_round_box_content_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* minimum_height, gint* natural_height);
static void journal_round_box_content_finalize (GObject* obj);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void __lambda6_ (JournalLoadingActor* self) {
	journal_loading_actor_stop (self);
}


static void ___lambda6__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self) {
	__lambda6_ (self);
}


JournalLoadingActor* journal_loading_actor_construct (GType object_type, JournalApp* app) {
	JournalLoadingActor * self = NULL;
	JournalApp* _tmp0_;
	JournalApp* _tmp1_;
	GtkBox* _tmp2_;
	GtkBox* _tmp3_;
	GtkSpinner* _tmp4_;
	GtkSpinner* _tmp5_;
	GtkSpinner* _tmp6_;
	JournalApp* _tmp7_;
	ClutterStage* _tmp8_;
	gfloat _tmp9_;
	gfloat _tmp10_;
	JournalApp* _tmp11_;
	ClutterStage* _tmp12_;
	gfloat _tmp13_;
	gfloat _tmp14_;
	GtkBox* _tmp15_;
	GtkClutterActor* _tmp16_;
	GtkClutterActor* _tmp17_;
	GtkClutterActor* _tmp18_;
	GtkSpinner* _tmp19_;
	GtkClutterActor* _tmp20_;
	GtkClutterActor* _tmp21_;
	GtkClutterActor* _tmp22_;
	GtkWidget* _tmp23_ = NULL;
	GtkStyleContext* _tmp24_ = NULL;
	GtkClutterActor* _tmp25_;
	JournalApp* _tmp26_;
	ClutterStage* _tmp27_;
	ClutterAlignConstraint* _tmp28_;
	ClutterAlignConstraint* _tmp29_;
	GtkClutterActor* _tmp30_;
	JournalApp* _tmp31_;
	ClutterStage* _tmp32_;
	ClutterAlignConstraint* _tmp33_;
	ClutterAlignConstraint* _tmp34_;
	GtkClutterActor* _tmp35_;
	JournalApp* _tmp36_;
	ClutterStage* _tmp37_;
	ClutterBindConstraint* _tmp38_;
	ClutterBindConstraint* _tmp39_;
	JournalApp* _tmp40_;
	ClutterStage* _tmp41_;
	GtkClutterActor* _tmp42_;
	JournalApp* _tmp43_;
	ClutterStage* _tmp44_;
	GtkClutterActor* _tmp45_;
	JournalApp* _tmp46_;
	JournalZeitgeistBackend* _tmp47_;
	JournalZeitgeistBackend* _tmp48_;
	GtkBox* _tmp49_;
	GtkSpinner* _tmp50_;
	g_return_val_if_fail (app != NULL, NULL);
	self = (JournalLoadingActor*) g_object_new (object_type, NULL);
	_tmp0_ = app;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->app);
	self->priv->app = _tmp1_;
	_tmp2_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	_tmp3_ = g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->box);
	self->priv->box = _tmp3_;
	_tmp4_ = (GtkSpinner*) gtk_spinner_new ();
	_tmp5_ = g_object_ref_sink (_tmp4_);
	_g_object_unref0 (self->priv->throbber);
	self->priv->throbber = _tmp5_;
	_tmp6_ = self->priv->throbber;
	_tmp7_ = app;
	_tmp8_ = _tmp7_->stage;
	_tmp9_ = clutter_actor_get_height ((ClutterActor*) _tmp8_);
	_tmp10_ = _tmp9_;
	_tmp11_ = app;
	_tmp12_ = _tmp11_->stage;
	_tmp13_ = clutter_actor_get_height ((ClutterActor*) _tmp12_);
	_tmp14_ = _tmp13_;
	gtk_widget_set_size_request ((GtkWidget*) _tmp6_, ((gint) _tmp10_) / 3, ((gint) _tmp14_) / 3);
	_tmp15_ = self->priv->box;
	_tmp16_ = (GtkClutterActor*) gtk_clutter_actor_new_with_contents ((GtkWidget*) _tmp15_);
	_tmp17_ = g_object_ref_sink (_tmp16_);
	_g_object_unref0 (self->priv->gtk_actor_box);
	self->priv->gtk_actor_box = _tmp17_;
	_tmp18_ = self->priv->gtk_actor_box;
	clutter_actor_set_opacity ((ClutterActor*) _tmp18_, (guint) 235);
	_tmp19_ = self->priv->throbber;
	_tmp20_ = (GtkClutterActor*) gtk_clutter_actor_new_with_contents ((GtkWidget*) _tmp19_);
	_tmp21_ = g_object_ref_sink (_tmp20_);
	_g_object_unref0 (self->priv->gtk_actor_throbber);
	self->priv->gtk_actor_throbber = _tmp21_;
	_tmp22_ = self->priv->gtk_actor_throbber;
	_tmp23_ = gtk_clutter_actor_get_widget (_tmp22_);
	_tmp24_ = gtk_widget_get_style_context (_tmp23_);
	gtk_style_context_add_class (_tmp24_, "throbber");
	_tmp25_ = self->priv->gtk_actor_throbber;
	_tmp26_ = app;
	_tmp27_ = _tmp26_->stage;
	_tmp28_ = (ClutterAlignConstraint*) clutter_align_constraint_new ((ClutterActor*) _tmp27_, CLUTTER_ALIGN_X_AXIS, 0.5f);
	_tmp29_ = g_object_ref_sink (_tmp28_);
	clutter_actor_add_constraint ((ClutterActor*) _tmp25_, (ClutterConstraint*) _tmp29_);
	_g_object_unref0 (_tmp29_);
	_tmp30_ = self->priv->gtk_actor_throbber;
	_tmp31_ = app;
	_tmp32_ = _tmp31_->stage;
	_tmp33_ = (ClutterAlignConstraint*) clutter_align_constraint_new ((ClutterActor*) _tmp32_, CLUTTER_ALIGN_Y_AXIS, 0.5f);
	_tmp34_ = g_object_ref_sink (_tmp33_);
	clutter_actor_add_constraint ((ClutterActor*) _tmp30_, (ClutterConstraint*) _tmp34_);
	_g_object_unref0 (_tmp34_);
	_tmp35_ = self->priv->gtk_actor_box;
	_tmp36_ = app;
	_tmp37_ = _tmp36_->stage;
	_tmp38_ = (ClutterBindConstraint*) clutter_bind_constraint_new ((ClutterActor*) _tmp37_, CLUTTER_BIND_SIZE, (gfloat) 0);
	_tmp39_ = g_object_ref_sink (_tmp38_);
	clutter_actor_add_constraint ((ClutterActor*) _tmp35_, (ClutterConstraint*) _tmp39_);
	_g_object_unref0 (_tmp39_);
	_tmp40_ = app;
	_tmp41_ = _tmp40_->stage;
	_tmp42_ = self->priv->gtk_actor_box;
	clutter_container_add_actor ((ClutterContainer*) _tmp41_, (ClutterActor*) _tmp42_);
	_tmp43_ = app;
	_tmp44_ = _tmp43_->stage;
	_tmp45_ = self->priv->gtk_actor_throbber;
	clutter_container_add_actor ((ClutterContainer*) _tmp44_, (ClutterActor*) _tmp45_);
	_tmp46_ = app;
	_tmp47_ = journal_app_get_backend (_tmp46_);
	_tmp48_ = _tmp47_;
	g_signal_connect_object (_tmp48_, "events-loaded", (GCallback) ___lambda6__journal_zeitgeist_backend_events_loaded, self, 0);
	_tmp49_ = self->priv->box;
	gtk_widget_show_all ((GtkWidget*) _tmp49_);
	_tmp50_ = self->priv->throbber;
	gtk_widget_show_all ((GtkWidget*) _tmp50_);
	return self;
}


JournalLoadingActor* journal_loading_actor_new (JournalApp* app) {
	return journal_loading_actor_construct (JOURNAL_TYPE_LOADING_ACTOR, app);
}


void journal_loading_actor_start (JournalLoadingActor* self) {
	GtkSpinner* _tmp0_;
	GtkClutterActor* _tmp1_;
	GtkClutterActor* _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->throbber;
	gtk_spinner_start (_tmp0_);
	_tmp1_ = self->priv->gtk_actor_box;
	clutter_actor_show ((ClutterActor*) _tmp1_);
	_tmp2_ = self->priv->gtk_actor_throbber;
	clutter_actor_show ((ClutterActor*) _tmp2_);
}


void journal_loading_actor_stop (JournalLoadingActor* self) {
	GtkSpinner* _tmp0_;
	GtkClutterActor* _tmp1_;
	GtkClutterActor* _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->throbber;
	gtk_spinner_stop (_tmp0_);
	_tmp1_ = self->priv->gtk_actor_box;
	clutter_actor_hide ((ClutterActor*) _tmp1_);
	_tmp2_ = self->priv->gtk_actor_throbber;
	clutter_actor_hide ((ClutterActor*) _tmp2_);
}


static void journal_loading_actor_class_init (JournalLoadingActorClass * klass) {
	journal_loading_actor_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalLoadingActorPrivate));
	G_OBJECT_CLASS (klass)->finalize = journal_loading_actor_finalize;
}


static void journal_loading_actor_instance_init (JournalLoadingActor * self) {
	self->priv = JOURNAL_LOADING_ACTOR_GET_PRIVATE (self);
}


static void journal_loading_actor_finalize (GObject* obj) {
	JournalLoadingActor * self;
	self = JOURNAL_LOADING_ACTOR (obj);
	_g_object_unref0 (self->priv->app);
	_g_object_unref0 (self->priv->gtk_actor_box);
	_g_object_unref0 (self->priv->gtk_actor_throbber);
	_g_object_unref0 (self->priv->box);
	_g_object_unref0 (self->priv->throbber);
	G_OBJECT_CLASS (journal_loading_actor_parent_class)->finalize (obj);
}


GType journal_loading_actor_get_type (void) {
	static volatile gsize journal_loading_actor_type_id__volatile = 0;
	if (g_once_init_enter (&journal_loading_actor_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalLoadingActorClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_loading_actor_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalLoadingActor), 0, (GInstanceInitFunc) journal_loading_actor_instance_init, NULL };
		GType journal_loading_actor_type_id;
		journal_loading_actor_type_id = g_type_register_static (G_TYPE_OBJECT, "JournalLoadingActor", &g_define_type_info, 0);
		g_once_init_leave (&journal_loading_actor_type_id__volatile, journal_loading_actor_type_id);
	}
	return journal_loading_actor_type_id__volatile;
}


GType side_get_type (void) {
	static volatile gsize side_type_id__volatile = 0;
	if (g_once_init_enter (&side_type_id__volatile)) {
		static const GEnumValue values[] = {{SIDE_TOP, "SIDE_TOP", "top"}, {SIDE_LEFT, "SIDE_LEFT", "left"}, {SIDE_RIGHT, "SIDE_RIGHT", "right"}, {SIDE_BOTTOM, "SIDE_BOTTOM", "bottom"}, {0, NULL, NULL}};
		GType side_type_id;
		side_type_id = g_enum_register_static ("Side", values);
		g_once_init_leave (&side_type_id__volatile, side_type_id);
	}
	return side_type_id__volatile;
}


static void __lambda8_ (JournalClutterRoundBoxView* self) {
	journal_clutter_round_box_view_load_events (self);
}


static void ___lambda8__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self) {
	__lambda8_ (self);
}


static gboolean __lambda10_ (JournalClutterRoundBoxView* self, ClutterScrollEvent* e) {
	gboolean result = FALSE;
	ClutterActor* _tmp0_;
	gfloat _tmp1_ = 0.0F;
	gfloat y;
	ClutterScrollEvent _tmp2_;
	ClutterScrollDirection _tmp3_;
	ClutterScrollDirection direction;
	ClutterScrollDirection _tmp4_;
	gfloat _tmp7_;
	ClutterStage* _tmp8_;
	gfloat _tmp9_ = 0.0F;
	ClutterActor* _tmp10_;
	gfloat _tmp11_ = 0.0F;
	gfloat _tmp12_ = 0.0F;
	ClutterActor* _tmp13_;
	gfloat _tmp14_;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = self->priv->viewport;
	_tmp1_ = clutter_actor_get_y (_tmp0_);
	y = _tmp1_;
	_tmp2_ = *e;
	_tmp3_ = _tmp2_.direction;
	direction = _tmp3_;
	_tmp4_ = direction;
	switch (_tmp4_) {
		case CLUTTER_SCROLL_UP:
		{
			gfloat _tmp5_;
			_tmp5_ = y;
			y = _tmp5_ - 100;
			break;
		}
		case CLUTTER_SCROLL_DOWN:
		{
			gfloat _tmp6_;
			_tmp6_ = y;
			y = _tmp6_ + 100;
			break;
		}
		case CLUTTER_SCROLL_LEFT:
		case CLUTTER_SCROLL_RIGHT:
		{
			break;
		}
		default:
		break;
	}
	_tmp7_ = y;
	_tmp8_ = self->priv->stage;
	_tmp9_ = clutter_actor_get_height ((ClutterActor*) _tmp8_);
	_tmp10_ = self->priv->viewport;
	_tmp11_ = clutter_actor_get_height (_tmp10_);
	_tmp12_ = CLAMP (_tmp7_, _tmp9_ - _tmp11_, 0.0f);
	y = _tmp12_;
	_tmp13_ = self->priv->viewport;
	_tmp14_ = y;
	clutter_actor_animate (_tmp13_, (gulong) CLUTTER_EASE_OUT_CUBIC, (guint) 100, "y", _tmp14_, NULL);
	result = TRUE;
	return result;
}


static gboolean ___lambda10__clutter_actor_scroll_event (ClutterActor* _sender, ClutterScrollEvent* event, gpointer self) {
	gboolean result;
	result = __lambda10_ (self, event);
	return result;
}


JournalClutterRoundBoxView* journal_clutter_round_box_view_construct (GType object_type, JournalApp* app) {
	JournalClutterRoundBoxView * self = NULL;
	JournalActivityModel* _tmp0_;
	JournalApp* _tmp1_;
	JournalApp* _tmp2_;
	JournalApp* _tmp3_;
	ClutterStage* _tmp4_;
	ClutterStage* _tmp5_;
	JournalApp* _tmp6_;
	JournalZeitgeistBackend* _tmp7_;
	JournalZeitgeistBackend* _tmp8_;
	ClutterActor* _tmp9_;
	ClutterActor* _tmp10_;
	ClutterActor* _tmp11_;
	ClutterActor* _tmp12_;
	ClutterActor* _tmp13_;
	ClutterStage* _tmp14_;
	ClutterBindConstraint* _tmp15_;
	ClutterBindConstraint* _tmp16_;
	JournalTimeline* _tmp17_;
	JournalTimeline* _tmp18_;
	JournalTimeline* _tmp19_;
	GtkClutterActor* _tmp20_;
	ClutterActor* _tmp21_;
	ClutterActor* _tmp22_;
	ClutterActor* _tmp23_;
	ClutterBindConstraint* _tmp24_;
	ClutterBindConstraint* _tmp25_;
	ClutterActor* _tmp26_;
	ClutterStage* _tmp27_;
	ClutterAlignConstraint* _tmp28_;
	ClutterAlignConstraint* _tmp29_;
	ClutterActor* _tmp30_;
	ClutterActor* _tmp31_;
	ClutterStage* _tmp32_;
	ClutterActor* _tmp33_;
	ClutterActor* _tmp34_;
	g_return_val_if_fail (app != NULL, NULL);
	self = (JournalClutterRoundBoxView*) g_object_new (object_type, NULL);
	_tmp0_ = journal_activity_model_new ();
	_g_object_unref0 (self->priv->model);
	self->priv->model = _tmp0_;
	_tmp1_ = app;
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_g_object_unref0 (self->priv->app);
	self->priv->app = _tmp2_;
	_tmp3_ = app;
	_tmp4_ = _tmp3_->stage;
	_tmp5_ = _g_object_ref0 (_tmp4_);
	_g_object_unref0 (self->priv->stage);
	self->priv->stage = _tmp5_;
	_tmp6_ = app;
	_tmp7_ = journal_app_get_backend (_tmp6_);
	_tmp8_ = _tmp7_;
	g_signal_connect_object (_tmp8_, "events-loaded", (GCallback) ___lambda8__journal_zeitgeist_backend_events_loaded, self, 0);
	_tmp9_ = clutter_actor_new ();
	_tmp10_ = g_object_ref_sink (_tmp9_);
	_g_object_unref0 (self->priv->viewport);
	self->priv->viewport = _tmp10_;
	_tmp11_ = self->priv->viewport;
	clutter_actor_set_clip_to_allocation (_tmp11_, TRUE);
	_tmp12_ = self->priv->viewport;
	clutter_actor_set_reactive (_tmp12_, TRUE);
	_tmp13_ = self->priv->viewport;
	_tmp14_ = self->priv->stage;
	_tmp15_ = (ClutterBindConstraint*) clutter_bind_constraint_new ((ClutterActor*) _tmp14_, CLUTTER_BIND_WIDTH, (gfloat) 0);
	_tmp16_ = g_object_ref_sink (_tmp15_);
	clutter_actor_add_constraint (_tmp13_, (ClutterConstraint*) _tmp16_);
	_g_object_unref0 (_tmp16_);
	_tmp17_ = journal_timeline_new ();
	_tmp18_ = g_object_ref_sink (_tmp17_);
	_g_object_unref0 (self->priv->timeline_gtk);
	self->priv->timeline_gtk = _tmp18_;
	_tmp19_ = self->priv->timeline_gtk;
	_tmp20_ = (GtkClutterActor*) gtk_clutter_actor_new_with_contents ((GtkWidget*) _tmp19_);
	_tmp21_ = (ClutterActor*) g_object_ref_sink (_tmp20_);
	_g_object_unref0 (self->priv->timeline);
	self->priv->timeline = _tmp21_;
	_tmp22_ = self->priv->timeline;
	_tmp23_ = self->priv->viewport;
	_tmp24_ = (ClutterBindConstraint*) clutter_bind_constraint_new (_tmp23_, CLUTTER_BIND_HEIGHT, (gfloat) 0);
	_tmp25_ = g_object_ref_sink (_tmp24_);
	clutter_actor_add_constraint (_tmp22_, (ClutterConstraint*) _tmp25_);
	_g_object_unref0 (_tmp25_);
	_tmp26_ = self->priv->timeline;
	_tmp27_ = self->priv->stage;
	_tmp28_ = (ClutterAlignConstraint*) clutter_align_constraint_new ((ClutterActor*) _tmp27_, CLUTTER_ALIGN_X_AXIS, 0.5f);
	_tmp29_ = g_object_ref_sink (_tmp28_);
	clutter_actor_add_constraint (_tmp26_, (ClutterConstraint*) _tmp29_);
	_g_object_unref0 (_tmp29_);
	_tmp30_ = self->priv->viewport;
	_tmp31_ = self->priv->timeline;
	clutter_container_add_actor ((ClutterContainer*) _tmp30_, _tmp31_);
	_tmp32_ = self->priv->stage;
	_tmp33_ = self->priv->viewport;
	clutter_container_add_actor ((ClutterContainer*) _tmp32_, _tmp33_);
	_tmp34_ = self->priv->viewport;
	g_signal_connect_object (_tmp34_, "scroll-event", (GCallback) ___lambda10__clutter_actor_scroll_event, self, 0);
	return self;
}


JournalClutterRoundBoxView* journal_clutter_round_box_view_new (JournalApp* app) {
	return journal_clutter_round_box_view_construct (JOURNAL_TYPE_CLUTTER_ROUND_BOX_VIEW, app);
}


void journal_clutter_round_box_view_load_events (JournalClutterRoundBoxView* self) {
	JournalApp* _tmp0_;
	JournalZeitgeistBackend* _tmp1_;
	JournalZeitgeistBackend* _tmp2_;
	GeeArrayList* _tmp3_;
	GeeArrayList* _tmp4_;
	GeeArrayList* _tmp5_;
	GeeArrayList* all_activities;
	gint i;
	gint type;
	Side side = 0;
	gfloat offset;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->app;
	_tmp1_ = journal_app_get_backend (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = journal_zeitgeist_backend_get_all_activities (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = _g_object_ref0 (_tmp4_);
	all_activities = _tmp5_;
	i = 50;
	type = 0;
	offset = (gfloat) 0;
	{
		GeeArrayList* _tmp6_;
		GeeArrayList* _tmp7_;
		GeeArrayList* _e_list;
		GeeArrayList* _tmp8_;
		gint _tmp9_;
		gint _tmp10_;
		gint _e_size;
		gint _e_index;
		_tmp6_ = all_activities;
		_tmp7_ = _g_object_ref0 (_tmp6_);
		_e_list = _tmp7_;
		_tmp8_ = _e_list;
		_tmp9_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp8_);
		_tmp10_ = _tmp9_;
		_e_size = _tmp10_;
		_e_index = -1;
		while (TRUE) {
			gint _tmp11_;
			gint _tmp12_;
			gint _tmp13_;
			GeeArrayList* _tmp14_;
			gint _tmp15_;
			gpointer _tmp16_ = NULL;
			ZeitgeistEvent* e;
			ZeitgeistEvent* _tmp17_;
			JournalGenericActivity* _tmp18_;
			JournalGenericActivity* activity;
			JournalActivityModel* _tmp19_;
			JournalGenericActivity* _tmp20_;
			gint _tmp21_;
			Side _tmp22_;
			JournalRoundBox* _tmp23_;
			JournalRoundBox* _tmp24_;
			JournalRoundBox* r;
			JournalGenericActivity* _tmp25_;
			JournalRoundBoxContent* _tmp26_;
			JournalRoundBoxContent* _tmp27_;
			JournalRoundBoxContent* rc;
			JournalRoundBox* _tmp28_;
			JournalRoundBoxContent* _tmp29_;
			JournalRoundBox* _tmp30_;
			GtkClutterActor* _tmp31_;
			GtkClutterActor* _tmp32_;
			GtkClutterActor* actor;
			ClutterActor* _tmp33_;
			GtkClutterActor* _tmp34_;
			gint _tmp35_;
			GtkClutterActor* _tmp40_;
			ClutterActor* _tmp41_;
			gfloat _tmp42_;
			ClutterBindConstraint* _tmp43_;
			ClutterBindConstraint* _tmp44_;
			GtkClutterActor* _tmp45_;
			gint _tmp46_;
			JournalTimeline* _tmp47_;
			gint _tmp48_;
			gint _tmp49_;
			gint _tmp54_;
			JournalRoundBox* _tmp55_;
			_tmp11_ = _e_index;
			_e_index = _tmp11_ + 1;
			_tmp12_ = _e_index;
			_tmp13_ = _e_size;
			if (!(_tmp12_ < _tmp13_)) {
				break;
			}
			_tmp14_ = _e_list;
			_tmp15_ = _e_index;
			_tmp16_ = gee_abstract_list_get ((GeeAbstractList*) _tmp14_, _tmp15_);
			e = (ZeitgeistEvent*) _tmp16_;
			_tmp17_ = e;
			_tmp18_ = journal_generic_activity_new (_tmp17_);
			activity = _tmp18_;
			_tmp19_ = self->priv->model;
			_tmp20_ = activity;
			journal_activity_model_add_activity (_tmp19_, _tmp20_);
			_tmp21_ = type;
			if ((_tmp21_ % 2) == 0) {
				side = SIDE_RIGHT;
			} else {
				side = SIDE_LEFT;
			}
			_tmp22_ = side;
			_tmp23_ = journal_round_box_new (_tmp22_);
			_tmp24_ = g_object_ref_sink (_tmp23_);
			r = _tmp24_;
			_tmp25_ = activity;
			_tmp26_ = journal_round_box_content_new (_tmp25_);
			_tmp27_ = g_object_ref_sink (_tmp26_);
			rc = _tmp27_;
			_tmp28_ = r;
			_tmp29_ = rc;
			gtk_container_add ((GtkContainer*) _tmp28_, (GtkWidget*) _tmp29_);
			_tmp30_ = r;
			_tmp31_ = (GtkClutterActor*) gtk_clutter_actor_new_with_contents ((GtkWidget*) _tmp30_);
			_tmp32_ = g_object_ref_sink (_tmp31_);
			actor = _tmp32_;
			_tmp33_ = self->priv->viewport;
			_tmp34_ = actor;
			clutter_container_add_actor ((ClutterContainer*) _tmp33_, (ClutterActor*) _tmp34_);
			_tmp35_ = type;
			if ((_tmp35_ % 2) == 0) {
				GtkClutterActor* _tmp36_;
				gfloat _tmp37_ = 0.0F;
				_tmp36_ = actor;
				_tmp37_ = clutter_actor_get_width ((ClutterActor*) _tmp36_);
				offset = -(5 + _tmp37_);
			} else {
				ClutterActor* _tmp38_;
				gfloat _tmp39_ = 0.0F;
				_tmp38_ = self->priv->timeline;
				_tmp39_ = clutter_actor_get_width (_tmp38_);
				offset = 5 + _tmp39_;
			}
			_tmp40_ = actor;
			_tmp41_ = self->priv->timeline;
			_tmp42_ = offset;
			_tmp43_ = (ClutterBindConstraint*) clutter_bind_constraint_new (_tmp41_, CLUTTER_BIND_X, _tmp42_);
			_tmp44_ = g_object_ref_sink (_tmp43_);
			clutter_actor_add_constraint ((ClutterActor*) _tmp40_, (ClutterConstraint*) _tmp44_);
			_g_object_unref0 (_tmp44_);
			_tmp45_ = actor;
			_tmp46_ = i;
			clutter_actor_set_y ((ClutterActor*) _tmp45_, (gfloat) _tmp46_);
			_tmp47_ = self->priv->timeline_gtk;
			_tmp48_ = i;
			journal_timeline_add_circle (_tmp47_, _tmp48_);
			_tmp49_ = type;
			if ((_tmp49_ % 2) == 1) {
				gint _tmp50_;
				_tmp50_ = i;
				i = _tmp50_ + 20;
			} else {
				gint _tmp51_;
				GtkClutterActor* _tmp52_;
				gfloat _tmp53_ = 0.0F;
				_tmp51_ = i;
				_tmp52_ = actor;
				_tmp53_ = clutter_actor_get_height ((ClutterActor*) _tmp52_);
				i = _tmp51_ + ((gint) _tmp53_);
			}
			_tmp54_ = type;
			type = _tmp54_ + 1;
			_tmp55_ = r;
			gtk_widget_show_all ((GtkWidget*) _tmp55_);
			_g_object_unref0 (actor);
			_g_object_unref0 (rc);
			_g_object_unref0 (r);
			_g_object_unref0 (activity);
			_g_object_unref0 (e);
		}
		_g_object_unref0 (_e_list);
	}
	_g_object_unref0 (all_activities);
}


static void journal_clutter_round_box_view_class_init (JournalClutterRoundBoxViewClass * klass) {
	journal_clutter_round_box_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalClutterRoundBoxViewPrivate));
	G_OBJECT_CLASS (klass)->finalize = journal_clutter_round_box_view_finalize;
}


static void journal_clutter_round_box_view_instance_init (JournalClutterRoundBoxView * self) {
	self->priv = JOURNAL_CLUTTER_ROUND_BOX_VIEW_GET_PRIVATE (self);
}


static void journal_clutter_round_box_view_finalize (GObject* obj) {
	JournalClutterRoundBoxView * self;
	self = JOURNAL_CLUTTER_ROUND_BOX_VIEW (obj);
	_g_object_unref0 (self->priv->model);
	_g_object_unref0 (self->priv->app);
	_g_object_unref0 (self->priv->stage);
	_g_object_unref0 (self->priv->viewport);
	_g_object_unref0 (self->priv->timeline);
	_g_object_unref0 (self->priv->timeline_gtk);
	G_OBJECT_CLASS (journal_clutter_round_box_view_parent_class)->finalize (obj);
}


GType journal_clutter_round_box_view_get_type (void) {
	static volatile gsize journal_clutter_round_box_view_type_id__volatile = 0;
	if (g_once_init_enter (&journal_clutter_round_box_view_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalClutterRoundBoxViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_clutter_round_box_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalClutterRoundBoxView), 0, (GInstanceInitFunc) journal_clutter_round_box_view_instance_init, NULL };
		GType journal_clutter_round_box_view_type_id;
		journal_clutter_round_box_view_type_id = g_type_register_static (GTK_TYPE_BOX, "JournalClutterRoundBoxView", &g_define_type_info, 0);
		g_once_init_leave (&journal_clutter_round_box_view_type_id__volatile, journal_clutter_round_box_view_type_id);
	}
	return journal_clutter_round_box_view_type_id__volatile;
}


static void __lambda11_ (JournalGtkRoundBoxView* self) {
	journal_gtk_round_box_view_setup_ui (self);
}


static void ___lambda11__gtk_widget_realize (GtkWidget* _sender, gpointer self) {
	__lambda11_ (self);
}


static gboolean __lambda12_ (JournalGtkRoundBoxView* self) {
	gboolean result = FALSE;
	journal_gtk_round_box_view_adjust_ui (self);
	result = FALSE;
	return result;
}


static gboolean ___lambda12__gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self) {
	gboolean result;
	result = __lambda12_ (self);
	return result;
}


static gboolean __lambda13_ (JournalGtkRoundBoxView* self) {
	gboolean result = FALSE;
	journal_gtk_round_box_view_adjust_ui (self);
	result = FALSE;
	return result;
}


static gboolean ___lambda13__gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self) {
	gboolean result;
	result = __lambda13_ (self);
	return result;
}


static void __lambda14_ (JournalGtkRoundBoxView* self) {
	journal_gtk_round_box_view_load_events (self);
}


static void ___lambda14__journal_zeitgeist_backend_events_loaded (JournalZeitgeistBackend* _sender, gpointer self) {
	__lambda14_ (self);
}


JournalGtkRoundBoxView* journal_gtk_round_box_view_construct (GType object_type, JournalApp* app) {
	JournalGtkRoundBoxView * self = NULL;
	JournalActivityModel* _tmp0_;
	JournalApp* _tmp1_;
	JournalApp* _tmp2_;
	GeeArrayList* _tmp3_;
	GtkStyleContext* _tmp4_ = NULL;
	JournalApp* _tmp5_;
	GtkApplicationWindow* _tmp6_;
	JournalApp* _tmp7_;
	GtkApplicationWindow* _tmp8_;
	JournalApp* _tmp9_;
	JournalZeitgeistBackend* _tmp10_;
	JournalZeitgeistBackend* _tmp11_;
	g_return_val_if_fail (app != NULL, NULL);
	self = (JournalGtkRoundBoxView*) g_object_new (object_type, NULL);
	_tmp0_ = journal_activity_model_new ();
	_g_object_unref0 (self->priv->model);
	self->priv->model = _tmp0_;
	_tmp1_ = app;
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_g_object_unref0 (self->priv->app);
	self->priv->app = _tmp2_;
	_tmp3_ = gee_array_list_new (G_TYPE_INT, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->point_circle);
	self->priv->point_circle = _tmp3_;
	_tmp4_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp4_, "timeline-gtk");
	gtk_widget_set_hexpand ((GtkWidget*) self, TRUE);
	self->priv->total_height = 0;
	g_signal_connect_object ((GtkWidget*) self, "realize", (GCallback) ___lambda11__gtk_widget_realize, self, 0);
	_tmp5_ = self->priv->app;
	_tmp6_ = _tmp5_->window;
	g_signal_connect_object ((GtkWidget*) _tmp6_, "configure-event", (GCallback) ___lambda12__gtk_widget_configure_event, self, 0);
	_tmp7_ = self->priv->app;
	_tmp8_ = _tmp7_->window;
	g_signal_connect_object ((GtkWidget*) _tmp8_, "window-state-event", (GCallback) ___lambda13__gtk_widget_window_state_event, self, 0);
	_tmp9_ = app;
	_tmp10_ = journal_app_get_backend (_tmp9_);
	_tmp11_ = _tmp10_;
	g_signal_connect_object (_tmp11_, "events-loaded", (GCallback) ___lambda14__journal_zeitgeist_backend_events_loaded, self, 0);
	return self;
}


JournalGtkRoundBoxView* journal_gtk_round_box_view_new (JournalApp* app) {
	return journal_gtk_round_box_view_construct (JOURNAL_TYPE_GTK_ROUND_BOX_VIEW, app);
}


static void journal_gtk_round_box_view_add_circle (JournalGtkRoundBoxView* self, gint y) {
	GeeArrayList* _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->point_circle;
	_tmp1_ = y;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp0_, GINT_TO_POINTER ((((_tmp1_ + JOURNAL_GTK_ROUND_BOX_VIEW_arrow_origin) - (JOURNAL_GTK_ROUND_BOX_VIEW_len_arrow / 2)) + (JOURNAL_GTK_ROUND_BOX_VIEW_radius * 2)) - 2));
}


static gpointer _cairo_reference0 (gpointer self) {
	return self ? cairo_reference (self) : NULL;
}


static gboolean journal_gtk_round_box_view_real_draw (GtkWidget* base, cairo_t* ctx) {
	JournalGtkRoundBoxView * self;
	gboolean result = FALSE;
	GtkStyleContext* _tmp0_ = NULL;
	GdkRGBA _tmp1_ = {0};
	GdkRGBA bg;
	GdkRGBA _tmp2_;
	ClutterColor _tmp3_ = {0};
	ClutterColor backgroundColor;
	GtkStyleContext* _tmp4_ = NULL;
	GdkRGBA _tmp5_ = {0};
	GdkRGBA color;
	GdkRGBA _tmp6_;
	ClutterColor _tmp7_ = {0};
	ClutterColor circleColor;
	GtkAllocation allocation = {0};
	GtkAllocation _tmp8_ = {0};
	GtkAllocation _tmp9_;
	gint _tmp10_;
	gint width;
	GtkAllocation _tmp11_;
	gint _tmp12_;
	gint height;
	cairo_t* _tmp13_;
	cairo_t* _tmp14_;
	cairo_t* cr;
	cairo_t* _tmp15_;
	cairo_t* _tmp16_;
	ClutterColor _tmp17_;
	cairo_t* _tmp18_;
	gint _tmp19_;
	cairo_t* _tmp20_;
	gint _tmp21_;
	cairo_t* _tmp22_;
	cairo_t* _tmp44_;
	GList* _tmp45_ = NULL;
	self = (JournalGtkRoundBoxView*) base;
	g_return_val_if_fail (ctx != NULL, FALSE);
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_color (_tmp0_, 0, &_tmp1_);
	bg = _tmp1_;
	_tmp2_ = bg;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp2_, &_tmp3_);
	backgroundColor = _tmp3_;
	_tmp4_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_border_color (_tmp4_, 0, &_tmp5_);
	color = _tmp5_;
	_tmp6_ = color;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp6_, &_tmp7_);
	circleColor = _tmp7_;
	gtk_widget_get_allocation ((GtkWidget*) self, &_tmp8_);
	allocation = _tmp8_;
	_tmp9_ = allocation;
	_tmp10_ = _tmp9_.width;
	width = _tmp10_;
	_tmp11_ = allocation;
	_tmp12_ = _tmp11_.height;
	height = _tmp12_;
	_tmp13_ = ctx;
	_tmp14_ = _cairo_reference0 (_tmp13_);
	cr = _tmp14_;
	_tmp15_ = ctx;
	cairo_save (_tmp15_);
	_tmp16_ = cr;
	_tmp17_ = backgroundColor;
	clutter_cairo_set_source_color (_tmp16_, &_tmp17_);
	_tmp18_ = ctx;
	_tmp19_ = width;
	cairo_translate (_tmp18_, (gdouble) ((_tmp19_ / 2) - (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2)), (gdouble) 0);
	_tmp20_ = ctx;
	_tmp21_ = height;
	cairo_rectangle (_tmp20_, (gdouble) 0, (gdouble) 0, (gdouble) JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width, (gdouble) _tmp21_);
	_tmp22_ = ctx;
	cairo_fill (_tmp22_);
	{
		GeeArrayList* _tmp23_;
		GeeArrayList* _tmp24_;
		GeeArrayList* _y_list;
		GeeArrayList* _tmp25_;
		gint _tmp26_;
		gint _tmp27_;
		gint _y_size;
		gint _y_index;
		_tmp23_ = self->priv->point_circle;
		_tmp24_ = _g_object_ref0 (_tmp23_);
		_y_list = _tmp24_;
		_tmp25_ = _y_list;
		_tmp26_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp25_);
		_tmp27_ = _tmp26_;
		_y_size = _tmp27_;
		_y_index = -1;
		while (TRUE) {
			gint _tmp28_;
			gint _tmp29_;
			gint _tmp30_;
			GeeArrayList* _tmp31_;
			gint _tmp32_;
			gpointer _tmp33_ = NULL;
			gint y;
			cairo_t* _tmp34_;
			ClutterColor _tmp35_;
			cairo_t* _tmp36_;
			gint _tmp37_;
			cairo_t* _tmp38_;
			cairo_t* _tmp39_;
			ClutterColor _tmp40_;
			cairo_t* _tmp41_;
			gint _tmp42_;
			cairo_t* _tmp43_;
			_tmp28_ = _y_index;
			_y_index = _tmp28_ + 1;
			_tmp29_ = _y_index;
			_tmp30_ = _y_size;
			if (!(_tmp29_ < _tmp30_)) {
				break;
			}
			_tmp31_ = _y_list;
			_tmp32_ = _y_index;
			_tmp33_ = gee_abstract_list_get ((GeeAbstractList*) _tmp31_, _tmp32_);
			y = GPOINTER_TO_INT (_tmp33_);
			_tmp34_ = cr;
			_tmp35_ = backgroundColor;
			clutter_cairo_set_source_color (_tmp34_, &_tmp35_);
			_tmp36_ = ctx;
			_tmp37_ = y;
			cairo_arc (_tmp36_, (gdouble) (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2), (gdouble) _tmp37_, (gdouble) JOURNAL_GTK_ROUND_BOX_VIEW_radius, (gdouble) 0, 2 * G_PI);
			_tmp38_ = ctx;
			cairo_stroke (_tmp38_);
			_tmp39_ = cr;
			_tmp40_ = circleColor;
			clutter_cairo_set_source_color (_tmp39_, &_tmp40_);
			_tmp41_ = ctx;
			_tmp42_ = y;
			cairo_arc (_tmp41_, (gdouble) (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2), (gdouble) _tmp42_, (gdouble) (JOURNAL_GTK_ROUND_BOX_VIEW_radius - 1), (gdouble) 0, 2 * G_PI);
			_tmp43_ = ctx;
			cairo_fill (_tmp43_);
		}
		_g_object_unref0 (_y_list);
	}
	_tmp44_ = ctx;
	cairo_restore (_tmp44_);
	_tmp45_ = gtk_container_get_children ((GtkContainer*) self);
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
		child_collection = _tmp45_;
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
			GtkWidget* _tmp46_;
			GtkWidget* child = NULL;
			_tmp46_ = _g_object_ref0 ((GtkWidget*) child_it->data);
			child = _tmp46_;
			{
				GtkWidget* _tmp47_;
				cairo_t* _tmp48_;
				_tmp47_ = child;
				_tmp48_ = ctx;
				gtk_container_propagate_draw ((GtkContainer*) self, _tmp47_, _tmp48_);
				_g_object_unref0 (child);
			}
		}
		_g_list_free0 (child_collection);
	}
	result = FALSE;
	_cairo_destroy0 (cr);
	return result;
}


void journal_gtk_round_box_view_load_events (JournalGtkRoundBoxView* self) {
	JournalApp* _tmp0_;
	JournalZeitgeistBackend* _tmp1_;
	JournalZeitgeistBackend* _tmp2_;
	GeeArrayList* _tmp3_;
	GeeArrayList* _tmp4_;
	GeeArrayList* _tmp5_;
	GeeArrayList* all_activities;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->app;
	_tmp1_ = journal_app_get_backend (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = journal_zeitgeist_backend_get_all_activities (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = _g_object_ref0 (_tmp4_);
	all_activities = _tmp5_;
	{
		GeeArrayList* _tmp6_;
		GeeArrayList* _tmp7_;
		GeeArrayList* _e_list;
		GeeArrayList* _tmp8_;
		gint _tmp9_;
		gint _tmp10_;
		gint _e_size;
		gint _e_index;
		_tmp6_ = all_activities;
		_tmp7_ = _g_object_ref0 (_tmp6_);
		_e_list = _tmp7_;
		_tmp8_ = _e_list;
		_tmp9_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp8_);
		_tmp10_ = _tmp9_;
		_e_size = _tmp10_;
		_e_index = -1;
		while (TRUE) {
			gint _tmp11_;
			gint _tmp12_;
			gint _tmp13_;
			GeeArrayList* _tmp14_;
			gint _tmp15_;
			gpointer _tmp16_ = NULL;
			ZeitgeistEvent* e;
			ZeitgeistEvent* _tmp17_;
			JournalGenericActivity* _tmp18_;
			JournalGenericActivity* activity;
			JournalActivityModel* _tmp19_;
			JournalGenericActivity* _tmp20_;
			_tmp11_ = _e_index;
			_e_index = _tmp11_ + 1;
			_tmp12_ = _e_index;
			_tmp13_ = _e_size;
			if (!(_tmp12_ < _tmp13_)) {
				break;
			}
			_tmp14_ = _e_list;
			_tmp15_ = _e_index;
			_tmp16_ = gee_abstract_list_get ((GeeAbstractList*) _tmp14_, _tmp15_);
			e = (ZeitgeistEvent*) _tmp16_;
			_tmp17_ = e;
			_tmp18_ = journal_generic_activity_new (_tmp17_);
			activity = _tmp18_;
			_tmp19_ = self->priv->model;
			_tmp20_ = activity;
			journal_activity_model_add_activity (_tmp19_, _tmp20_);
			_g_object_unref0 (activity);
			_g_object_unref0 (e);
		}
		_g_object_unref0 (_e_list);
	}
	_g_object_unref0 (all_activities);
}


static void journal_gtk_round_box_view_setup_ui (JournalGtkRoundBoxView* self) {
	gint i;
	gint type;
	Side side = 0;
	gfloat offset;
	g_return_if_fail (self != NULL);
	i = 50;
	type = 0;
	offset = (gfloat) 0;
	{
		JournalActivityModel* _tmp0_;
		GeeArrayList* _tmp1_;
		GeeArrayList* _tmp2_;
		GeeArrayList* _tmp3_;
		GeeArrayList* _activity_list;
		GeeArrayList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _activity_size;
		gint _activity_index;
		_tmp0_ = self->priv->model;
		_tmp1_ = journal_activity_model_get_activities (_tmp0_);
		_tmp2_ = _tmp1_;
		_tmp3_ = _g_object_ref0 (_tmp2_);
		_activity_list = _tmp3_;
		_tmp4_ = _activity_list;
		_tmp5_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_activity_size = _tmp6_;
		_activity_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			gint _tmp9_;
			GeeArrayList* _tmp10_;
			gint _tmp11_;
			gpointer _tmp12_ = NULL;
			JournalGenericActivity* activity;
			gint _tmp13_;
			Side _tmp14_;
			JournalRoundBox* _tmp15_;
			JournalRoundBox* _tmp16_;
			JournalRoundBox* r;
			JournalGenericActivity* _tmp17_;
			JournalRoundBoxContent* _tmp18_;
			JournalRoundBoxContent* _tmp19_;
			JournalRoundBoxContent* rc;
			JournalRoundBox* _tmp20_;
			JournalRoundBoxContent* _tmp21_;
			gint r_height = 0;
			gint r_width = 0;
			gint width = 0;
			JournalRoundBox* _tmp22_;
			gint _tmp23_ = 0;
			JournalRoundBox* _tmp24_;
			gint _tmp25_;
			gint _tmp26_ = 0;
			gint _tmp27_ = 0;
			gint _tmp28_;
			gint _tmp32_;
			JournalRoundBox* _tmp33_;
			gfloat _tmp34_;
			gint _tmp35_;
			gint _tmp36_;
			gint _tmp42_;
			_tmp7_ = _activity_index;
			_activity_index = _tmp7_ + 1;
			_tmp8_ = _activity_index;
			_tmp9_ = _activity_size;
			if (!(_tmp8_ < _tmp9_)) {
				break;
			}
			_tmp10_ = _activity_list;
			_tmp11_ = _activity_index;
			_tmp12_ = gee_abstract_list_get ((GeeAbstractList*) _tmp10_, _tmp11_);
			activity = (JournalGenericActivity*) _tmp12_;
			_tmp13_ = type;
			if ((_tmp13_ % 2) == 0) {
				side = SIDE_RIGHT;
			} else {
				side = SIDE_LEFT;
			}
			_tmp14_ = side;
			_tmp15_ = journal_round_box_new (_tmp14_);
			_tmp16_ = g_object_ref_sink (_tmp15_);
			r = _tmp16_;
			_tmp17_ = activity;
			_tmp18_ = journal_round_box_content_new (_tmp17_);
			_tmp19_ = g_object_ref_sink (_tmp18_);
			rc = _tmp19_;
			_tmp20_ = r;
			_tmp21_ = rc;
			gtk_container_add ((GtkContainer*) _tmp20_, (GtkWidget*) _tmp21_);
			_tmp22_ = r;
			gtk_widget_get_preferred_width ((GtkWidget*) _tmp22_, NULL, &_tmp23_);
			r_width = _tmp23_;
			_tmp24_ = r;
			_tmp25_ = r_width;
			gtk_widget_get_preferred_height_for_width ((GtkWidget*) _tmp24_, _tmp25_, NULL, &_tmp26_);
			r_height = _tmp26_;
			_tmp27_ = gtk_widget_get_allocated_width ((GtkWidget*) self);
			width = _tmp27_;
			_tmp28_ = type;
			if ((_tmp28_ % 2) == 0) {
				gint _tmp29_;
				gint _tmp30_;
				_tmp29_ = width;
				_tmp30_ = r_width;
				offset = (gfloat) (((((((gint) _tmp29_) / 2) + (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2)) - JOURNAL_GTK_ROUND_BOX_VIEW_radius) - 5) - _tmp30_);
			} else {
				gint _tmp31_;
				_tmp31_ = width;
				offset = (gfloat) ((((((gint) _tmp31_) / 2) + (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2)) + JOURNAL_GTK_ROUND_BOX_VIEW_radius) + 5);
			}
			_tmp32_ = i;
			journal_gtk_round_box_view_add_circle (self, _tmp32_);
			_tmp33_ = r;
			_tmp34_ = offset;
			_tmp35_ = i;
			gtk_layout_put ((GtkLayout*) self, (GtkWidget*) _tmp33_, (gint) _tmp34_, _tmp35_);
			_tmp36_ = type;
			if ((_tmp36_ % 2) == 1) {
				gint _tmp37_;
				_tmp37_ = i;
				i = _tmp37_ + 20;
			} else {
				gint _tmp38_;
				gint _tmp39_;
				gint _tmp40_;
				gint _tmp41_;
				_tmp38_ = i;
				_tmp39_ = r_height;
				i = _tmp38_ + _tmp39_;
				_tmp40_ = self->priv->total_height;
				_tmp41_ = r_height;
				self->priv->total_height = _tmp40_ + _tmp41_;
			}
			_tmp42_ = type;
			type = _tmp42_ + 1;
			_g_object_unref0 (rc);
			_g_object_unref0 (r);
			_g_object_unref0 (activity);
		}
		_g_object_unref0 (_activity_list);
	}
	gtk_widget_show_all ((GtkWidget*) self);
	journal_gtk_round_box_view_adjust_ui (self);
}


static void journal_gtk_round_box_view_adjust_ui (JournalGtkRoundBoxView* self) {
	gint _tmp0_ = 0;
	gint width;
	gint i;
	gint offset;
	GList* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_widget_get_allocated_width ((GtkWidget*) self);
	width = _tmp0_;
	i = 50;
	offset = 0;
	_tmp1_ = gtk_container_get_children ((GtkContainer*) self);
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
		child_collection = _tmp1_;
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
			GtkWidget* _tmp2_;
			GtkWidget* child = NULL;
			_tmp2_ = _g_object_ref0 ((GtkWidget*) child_it->data);
			child = _tmp2_;
			{
				GtkWidget* _tmp3_;
				gint _tmp4_ = 0;
				gint r_width;
				GtkWidget* _tmp5_;
				gint _tmp6_ = 0;
				gint r_height;
				GtkWidget* _tmp7_;
				Side _tmp8_;
				Side _tmp9_;
				Side side;
				Side _tmp10_;
				GtkWidget* _tmp14_;
				gint _tmp15_;
				gint _tmp16_;
				Side _tmp17_;
				gint _tmp21_;
				gint _tmp22_;
				_tmp3_ = child;
				_tmp4_ = gtk_widget_get_allocated_width (_tmp3_);
				r_width = _tmp4_;
				_tmp5_ = child;
				_tmp6_ = gtk_widget_get_allocated_height (_tmp5_);
				r_height = _tmp6_;
				_tmp7_ = child;
				_tmp8_ = journal_round_box_get_arrow_side (JOURNAL_ROUND_BOX (_tmp7_));
				_tmp9_ = _tmp8_;
				side = _tmp9_;
				_tmp10_ = side;
				if (_tmp10_ == SIDE_RIGHT) {
					gint _tmp11_;
					gint _tmp12_;
					_tmp11_ = width;
					_tmp12_ = r_width;
					offset = ((((((gint) _tmp11_) / 2) + (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2)) - JOURNAL_GTK_ROUND_BOX_VIEW_radius) - 5) - _tmp12_;
				} else {
					gint _tmp13_;
					_tmp13_ = width;
					offset = (((((gint) _tmp13_) / 2) + (JOURNAL_GTK_ROUND_BOX_VIEW_timeline_width / 2)) + JOURNAL_GTK_ROUND_BOX_VIEW_radius) + 5;
				}
				_tmp14_ = child;
				_tmp15_ = offset;
				_tmp16_ = i;
				gtk_layout_move ((GtkLayout*) self, _tmp14_, _tmp15_, _tmp16_);
				_tmp17_ = side;
				if (_tmp17_ == SIDE_RIGHT) {
					gint _tmp18_;
					gint _tmp19_;
					_tmp18_ = i;
					_tmp19_ = r_height;
					i = _tmp18_ + _tmp19_;
				} else {
					gint _tmp20_;
					_tmp20_ = i;
					i = _tmp20_ + 20;
				}
				_tmp21_ = self->priv->total_height;
				_tmp22_ = r_height;
				self->priv->total_height = _tmp21_ + _tmp22_;
				_g_object_unref0 (child);
			}
		}
		_g_list_free0 (child_collection);
	}
}


static void journal_gtk_round_box_view_real_get_preferred_height (GtkWidget* base, gint* minimum_height, gint* natural_height) {
	JournalGtkRoundBoxView * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	gint _tmp0_;
	self = (JournalGtkRoundBoxView*) base;
	_tmp0_ = self->priv->total_height;
	_vala_natural_height = _tmp0_;
	_vala_minimum_height = _vala_natural_height;
	if (minimum_height) {
		*minimum_height = _vala_minimum_height;
	}
	if (natural_height) {
		*natural_height = _vala_natural_height;
	}
}


static void journal_gtk_round_box_view_class_init (JournalGtkRoundBoxViewClass * klass) {
	journal_gtk_round_box_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalGtkRoundBoxViewPrivate));
	GTK_WIDGET_CLASS (klass)->draw = journal_gtk_round_box_view_real_draw;
	GTK_WIDGET_CLASS (klass)->get_preferred_height = journal_gtk_round_box_view_real_get_preferred_height;
	G_OBJECT_CLASS (klass)->finalize = journal_gtk_round_box_view_finalize;
}


static void journal_gtk_round_box_view_instance_init (JournalGtkRoundBoxView * self) {
	self->priv = JOURNAL_GTK_ROUND_BOX_VIEW_GET_PRIVATE (self);
}


static void journal_gtk_round_box_view_finalize (GObject* obj) {
	JournalGtkRoundBoxView * self;
	self = JOURNAL_GTK_ROUND_BOX_VIEW (obj);
	_g_object_unref0 (self->priv->model);
	_g_object_unref0 (self->priv->app);
	_g_object_unref0 (self->priv->point_circle);
	G_OBJECT_CLASS (journal_gtk_round_box_view_parent_class)->finalize (obj);
}


GType journal_gtk_round_box_view_get_type (void) {
	static volatile gsize journal_gtk_round_box_view_type_id__volatile = 0;
	if (g_once_init_enter (&journal_gtk_round_box_view_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalGtkRoundBoxViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_gtk_round_box_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalGtkRoundBoxView), 0, (GInstanceInitFunc) journal_gtk_round_box_view_instance_init, NULL };
		GType journal_gtk_round_box_view_type_id;
		journal_gtk_round_box_view_type_id = g_type_register_static (GTK_TYPE_LAYOUT, "JournalGtkRoundBoxView", &g_define_type_info, 0);
		g_once_init_leave (&journal_gtk_round_box_view_type_id__volatile, journal_gtk_round_box_view_type_id);
	}
	return journal_gtk_round_box_view_type_id__volatile;
}


JournalTimeline* journal_timeline_construct (GType object_type) {
	JournalTimeline * self = NULL;
	GeeArrayList* _tmp0_;
	GtkStyleContext* _tmp1_ = NULL;
	self = (JournalTimeline*) g_object_new (object_type, NULL);
	_tmp0_ = gee_array_list_new (G_TYPE_INT, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->point_circle);
	self->priv->point_circle = _tmp0_;
	_tmp1_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp1_, "timeline-clutter");
	return self;
}


JournalTimeline* journal_timeline_new (void) {
	return journal_timeline_construct (JOURNAL_TYPE_TIMELINE);
}


void journal_timeline_add_circle (JournalTimeline* self, gint y) {
	GeeArrayList* _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->point_circle;
	_tmp1_ = y;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp0_, GINT_TO_POINTER ((((_tmp1_ + JOURNAL_TIMELINE_arrow_origin) - (JOURNAL_TIMELINE_len_arrow / 2)) + (JOURNAL_TIMELINE_radius * 2)) - 2));
}


static gboolean journal_timeline_real_draw (GtkWidget* base, cairo_t* ctx) {
	JournalTimeline * self;
	gboolean result = FALSE;
	GtkStyleContext* _tmp0_ = NULL;
	GdkRGBA _tmp1_ = {0};
	GdkRGBA bg;
	GdkRGBA _tmp2_;
	ClutterColor _tmp3_ = {0};
	ClutterColor backgroundColor;
	GtkStyleContext* _tmp4_ = NULL;
	GdkRGBA _tmp5_ = {0};
	GdkRGBA color;
	GdkRGBA _tmp6_;
	ClutterColor _tmp7_ = {0};
	ClutterColor circleColor;
	GtkAllocation allocation = {0};
	GtkAllocation _tmp8_ = {0};
	GtkAllocation _tmp9_;
	gint _tmp10_;
	gint height;
	cairo_t* _tmp11_;
	cairo_t* _tmp12_;
	cairo_t* cr;
	cairo_t* _tmp13_;
	cairo_t* _tmp14_;
	cairo_t* _tmp15_;
	cairo_t* _tmp16_;
	ClutterColor _tmp17_;
	cairo_t* _tmp18_;
	gint _tmp19_;
	cairo_t* _tmp20_;
	self = (JournalTimeline*) base;
	g_return_val_if_fail (ctx != NULL, FALSE);
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_background_color (_tmp0_, 0, &_tmp1_);
	bg = _tmp1_;
	_tmp2_ = bg;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp2_, &_tmp3_);
	backgroundColor = _tmp3_;
	_tmp4_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_color (_tmp4_, 0, &_tmp5_);
	color = _tmp5_;
	_tmp6_ = color;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp6_, &_tmp7_);
	circleColor = _tmp7_;
	gtk_widget_get_allocation ((GtkWidget*) self, &_tmp8_);
	allocation = _tmp8_;
	_tmp9_ = allocation;
	_tmp10_ = _tmp9_.height;
	height = _tmp10_;
	_tmp11_ = ctx;
	_tmp12_ = _cairo_reference0 (_tmp11_);
	cr = _tmp12_;
	_tmp13_ = ctx;
	cairo_set_source_rgba (_tmp13_, 1.0, 1.0, 1.0, 0.0);
	_tmp14_ = ctx;
	cairo_set_operator (_tmp14_, CAIRO_OPERATOR_SOURCE);
	_tmp15_ = ctx;
	cairo_paint (_tmp15_);
	_tmp16_ = cr;
	_tmp17_ = backgroundColor;
	clutter_cairo_set_source_color (_tmp16_, &_tmp17_);
	_tmp18_ = ctx;
	_tmp19_ = height;
	cairo_rectangle (_tmp18_, (gdouble) JOURNAL_TIMELINE_radius, (gdouble) 0, (gdouble) JOURNAL_TIMELINE_timeline_width, (gdouble) _tmp19_);
	_tmp20_ = ctx;
	cairo_fill (_tmp20_);
	{
		GeeArrayList* _tmp21_;
		GeeArrayList* _tmp22_;
		GeeArrayList* _y_list;
		GeeArrayList* _tmp23_;
		gint _tmp24_;
		gint _tmp25_;
		gint _y_size;
		gint _y_index;
		_tmp21_ = self->priv->point_circle;
		_tmp22_ = _g_object_ref0 (_tmp21_);
		_y_list = _tmp22_;
		_tmp23_ = _y_list;
		_tmp24_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp23_);
		_tmp25_ = _tmp24_;
		_y_size = _tmp25_;
		_y_index = -1;
		while (TRUE) {
			gint _tmp26_;
			gint _tmp27_;
			gint _tmp28_;
			GeeArrayList* _tmp29_;
			gint _tmp30_;
			gpointer _tmp31_ = NULL;
			gint y;
			cairo_t* _tmp32_;
			ClutterColor _tmp33_;
			cairo_t* _tmp34_;
			gint _tmp35_;
			cairo_t* _tmp36_;
			cairo_t* _tmp37_;
			ClutterColor _tmp38_;
			cairo_t* _tmp39_;
			gint _tmp40_;
			cairo_t* _tmp41_;
			_tmp26_ = _y_index;
			_y_index = _tmp26_ + 1;
			_tmp27_ = _y_index;
			_tmp28_ = _y_size;
			if (!(_tmp27_ < _tmp28_)) {
				break;
			}
			_tmp29_ = _y_list;
			_tmp30_ = _y_index;
			_tmp31_ = gee_abstract_list_get ((GeeAbstractList*) _tmp29_, _tmp30_);
			y = GPOINTER_TO_INT (_tmp31_);
			_tmp32_ = cr;
			_tmp33_ = backgroundColor;
			clutter_cairo_set_source_color (_tmp32_, &_tmp33_);
			_tmp34_ = ctx;
			_tmp35_ = y;
			cairo_arc (_tmp34_, (gdouble) (JOURNAL_TIMELINE_radius + (JOURNAL_TIMELINE_timeline_width / 2)), (gdouble) _tmp35_, (gdouble) JOURNAL_TIMELINE_radius, (gdouble) 0, 2 * G_PI);
			_tmp36_ = ctx;
			cairo_stroke (_tmp36_);
			_tmp37_ = cr;
			_tmp38_ = circleColor;
			clutter_cairo_set_source_color (_tmp37_, &_tmp38_);
			_tmp39_ = ctx;
			_tmp40_ = y;
			cairo_arc (_tmp39_, (gdouble) (JOURNAL_TIMELINE_radius + (JOURNAL_TIMELINE_timeline_width / 2)), (gdouble) _tmp40_, (gdouble) (JOURNAL_TIMELINE_radius - 1), (gdouble) 0, 2 * G_PI);
			_tmp41_ = ctx;
			cairo_fill (_tmp41_);
		}
		_g_object_unref0 (_y_list);
	}
	result = FALSE;
	_cairo_destroy0 (cr);
	return result;
}


static GtkSizeRequestMode journal_timeline_real_get_request_mode (GtkWidget* base) {
	JournalTimeline * self;
	GtkSizeRequestMode result = 0;
	self = (JournalTimeline*) base;
	result = GTK_SIZE_REQUEST_HEIGHT_FOR_WIDTH;
	return result;
}


static void journal_timeline_real_get_preferred_width (GtkWidget* base, gint* min_width, gint* nat_width) {
	JournalTimeline * self;
	gint _vala_min_width = 0;
	gint _vala_nat_width = 0;
	self = (JournalTimeline*) base;
	_vala_min_width = (2 * JOURNAL_TIMELINE_radius) + JOURNAL_TIMELINE_timeline_width;
	_vala_nat_width = _vala_min_width;
	if (min_width) {
		*min_width = _vala_min_width;
	}
	if (nat_width) {
		*nat_width = _vala_nat_width;
	}
}


static void journal_timeline_class_init (JournalTimelineClass * klass) {
	journal_timeline_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalTimelinePrivate));
	GTK_WIDGET_CLASS (klass)->draw = journal_timeline_real_draw;
	GTK_WIDGET_CLASS (klass)->get_request_mode = journal_timeline_real_get_request_mode;
	GTK_WIDGET_CLASS (klass)->get_preferred_width = journal_timeline_real_get_preferred_width;
	G_OBJECT_CLASS (klass)->finalize = journal_timeline_finalize;
}


static void journal_timeline_instance_init (JournalTimeline * self) {
	self->priv = JOURNAL_TIMELINE_GET_PRIVATE (self);
}


static void journal_timeline_finalize (GObject* obj) {
	JournalTimeline * self;
	self = JOURNAL_TIMELINE (obj);
	_g_object_unref0 (self->priv->point_circle);
	G_OBJECT_CLASS (journal_timeline_parent_class)->finalize (obj);
}


GType journal_timeline_get_type (void) {
	static volatile gsize journal_timeline_type_id__volatile = 0;
	if (g_once_init_enter (&journal_timeline_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalTimelineClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_timeline_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalTimeline), 0, (GInstanceInitFunc) journal_timeline_instance_init, NULL };
		GType journal_timeline_type_id;
		journal_timeline_type_id = g_type_register_static (GTK_TYPE_DRAWING_AREA, "JournalTimeline", &g_define_type_info, 0);
		g_once_init_leave (&journal_timeline_type_id__volatile, journal_timeline_type_id);
	}
	return journal_timeline_type_id__volatile;
}


JournalRoundBox* journal_round_box_construct (GType object_type, Side side) {
	JournalRoundBox * self = NULL;
	Side _tmp0_;
	gint _tmp1_;
	GtkStyleContext* _tmp2_ = NULL;
	self = (JournalRoundBox*) g_object_new (object_type, NULL);
	_tmp0_ = side;
	self->priv->_arrowSide = _tmp0_;
	_tmp1_ = journal_round_box_BORDER_WIDTH;
	gtk_container_set_border_width ((GtkContainer*) self, (guint) _tmp1_);
	_tmp2_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp2_, "roundbox");
	return self;
}


JournalRoundBox* journal_round_box_new (Side side) {
	return journal_round_box_construct (JOURNAL_TYPE_ROUND_BOX, side);
}


static gboolean journal_round_box_real_draw (GtkWidget* base, cairo_t* ctx) {
	JournalRoundBox * self;
	gboolean result = FALSE;
	gint borderWidth;
	gint baseL;
	gint rise;
	gint borderRadius;
	gint _tmp0_;
	gint halfBorder;
	gint _tmp1_;
	gdouble _tmp2_ = 0.0;
	gdouble halfBase;
	GtkStyleContext* _tmp3_ = NULL;
	GdkRGBA _tmp4_ = {0};
	GdkRGBA bc;
	GdkRGBA _tmp5_;
	ClutterColor _tmp6_ = {0};
	ClutterColor borderColor;
	GtkStyleContext* _tmp7_ = NULL;
	GdkRGBA _tmp8_ = {0};
	GdkRGBA bg;
	GdkRGBA _tmp9_;
	ClutterColor _tmp10_ = {0};
	ClutterColor backgroundColor;
	GtkAllocation allocation = {0};
	GtkAllocation _tmp11_ = {0};
	GtkAllocation _tmp12_;
	gint _tmp13_;
	gint width;
	GtkAllocation _tmp14_;
	gint _tmp15_;
	gint height;
	gint _tmp16_;
	gint boxWidth;
	gint _tmp17_;
	gint boxHeight;
	gboolean _tmp18_ = FALSE;
	Side _tmp19_;
	gboolean _tmp21_;
	cairo_t* _tmp26_;
	cairo_t* _tmp27_;
	cairo_t* cr;
	cairo_t* _tmp28_;
	ClutterColor _tmp29_;
	Side _tmp30_;
	gint _tmp36_;
	gint x1;
	gint _tmp37_;
	gint y1;
	gint _tmp38_;
	gint _tmp39_;
	gint x2;
	gint _tmp40_;
	gint _tmp41_;
	gint y2;
	cairo_t* _tmp42_;
	gint _tmp43_;
	gint _tmp44_;
	gint _tmp45_;
	Side _tmp46_;
	cairo_t* _tmp89_;
	gint _tmp90_;
	gint _tmp91_;
	gint _tmp92_;
	cairo_t* _tmp93_;
	gint _tmp94_;
	gint _tmp95_;
	gint _tmp96_;
	gint _tmp97_;
	gint _tmp98_;
	Side _tmp99_;
	cairo_t* _tmp142_;
	gint _tmp143_;
	gint _tmp144_;
	gint _tmp145_;
	cairo_t* _tmp146_;
	gint _tmp147_;
	gint _tmp148_;
	gint _tmp149_;
	gint _tmp150_;
	gint _tmp151_;
	Side _tmp152_;
	cairo_t* _tmp195_;
	gint _tmp196_;
	gint _tmp197_;
	gint _tmp198_;
	cairo_t* _tmp199_;
	gint _tmp200_;
	gint _tmp201_;
	gint _tmp202_;
	gint _tmp203_;
	gint _tmp204_;
	Side _tmp205_;
	cairo_t* _tmp248_;
	gint _tmp249_;
	gint _tmp250_;
	gint _tmp251_;
	cairo_t* _tmp252_;
	gint _tmp253_;
	gint _tmp254_;
	gint _tmp255_;
	gint _tmp256_;
	gint _tmp257_;
	cairo_t* _tmp258_;
	ClutterColor _tmp259_;
	cairo_t* _tmp260_;
	cairo_t* _tmp261_;
	ClutterColor _tmp262_;
	cairo_t* _tmp263_;
	gint _tmp264_;
	cairo_t* _tmp265_;
	GtkWidget* _tmp266_ = NULL;
	cairo_t* _tmp267_;
	self = (JournalRoundBox*) base;
	g_return_val_if_fail (ctx != NULL, FALSE);
	borderWidth = 2;
	baseL = 20;
	rise = 10;
	borderRadius = 10;
	_tmp0_ = borderWidth;
	halfBorder = _tmp0_ / 2;
	_tmp1_ = baseL;
	_tmp2_ = floor ((gdouble) (_tmp1_ / 2));
	halfBase = _tmp2_;
	_tmp3_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_border_color (_tmp3_, 0, &_tmp4_);
	bc = _tmp4_;
	_tmp5_ = bc;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp5_, &_tmp6_);
	borderColor = _tmp6_;
	_tmp7_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_get_background_color (_tmp7_, 0, &_tmp8_);
	bg = _tmp8_;
	_tmp9_ = bg;
	journal_utils_gdk_rgba_to_clutter_color (&_tmp9_, &_tmp10_);
	backgroundColor = _tmp10_;
	gtk_widget_get_allocation ((GtkWidget*) self, &_tmp11_);
	allocation = _tmp11_;
	_tmp12_ = allocation;
	_tmp13_ = _tmp12_.width;
	width = _tmp13_;
	_tmp14_ = allocation;
	_tmp15_ = _tmp14_.height;
	height = _tmp15_;
	_tmp16_ = width;
	boxWidth = _tmp16_;
	_tmp17_ = height;
	boxHeight = _tmp17_;
	_tmp19_ = self->priv->_arrowSide;
	if (_tmp19_ == SIDE_TOP) {
		_tmp18_ = TRUE;
	} else {
		Side _tmp20_;
		_tmp20_ = self->priv->_arrowSide;
		_tmp18_ = _tmp20_ == SIDE_BOTTOM;
	}
	_tmp21_ = _tmp18_;
	if (_tmp21_) {
		gint _tmp22_;
		gint _tmp23_;
		_tmp22_ = boxHeight;
		_tmp23_ = rise;
		boxHeight = _tmp22_ - _tmp23_;
	} else {
		gint _tmp24_;
		gint _tmp25_;
		_tmp24_ = boxWidth;
		_tmp25_ = rise;
		boxWidth = _tmp24_ - _tmp25_;
	}
	_tmp26_ = ctx;
	_tmp27_ = _cairo_reference0 (_tmp26_);
	cr = _tmp27_;
	_tmp28_ = cr;
	_tmp29_ = borderColor;
	clutter_cairo_set_source_color (_tmp28_, &_tmp29_);
	_tmp30_ = self->priv->_arrowSide;
	if (_tmp30_ == SIDE_TOP) {
		cairo_t* _tmp31_;
		gint _tmp32_;
		_tmp31_ = cr;
		_tmp32_ = rise;
		cairo_translate (_tmp31_, (gdouble) 0, (gdouble) _tmp32_);
	} else {
		Side _tmp33_;
		_tmp33_ = self->priv->_arrowSide;
		if (_tmp33_ == SIDE_LEFT) {
			cairo_t* _tmp34_;
			gint _tmp35_;
			_tmp34_ = cr;
			_tmp35_ = rise;
			cairo_translate (_tmp34_, (gdouble) _tmp35_, (gdouble) 0);
		}
	}
	_tmp36_ = halfBorder;
	x1 = _tmp36_;
	_tmp37_ = halfBorder;
	y1 = _tmp37_;
	_tmp38_ = boxWidth;
	_tmp39_ = halfBorder;
	x2 = _tmp38_ - _tmp39_;
	_tmp40_ = boxHeight;
	_tmp41_ = halfBorder;
	y2 = _tmp40_ - _tmp41_;
	_tmp42_ = cr;
	_tmp43_ = x1;
	_tmp44_ = borderRadius;
	_tmp45_ = y1;
	cairo_move_to (_tmp42_, (gdouble) (_tmp43_ + _tmp44_), (gdouble) _tmp45_);
	_tmp46_ = self->priv->_arrowSide;
	if (_tmp46_ == SIDE_TOP) {
		gint _tmp47_;
		gint _tmp48_;
		gint _tmp49_;
		gdouble _tmp50_;
		_tmp47_ = self->priv->_arrowOrigin;
		_tmp48_ = x1;
		_tmp49_ = borderRadius;
		_tmp50_ = halfBase;
		if (((gdouble) _tmp47_) < (_tmp48_ + (_tmp49_ + _tmp50_))) {
			cairo_t* _tmp51_;
			gint _tmp52_;
			gint _tmp53_;
			gint _tmp54_;
			cairo_t* _tmp55_;
			gint _tmp56_;
			gint _tmp57_;
			gint _tmp58_;
			gdouble _tmp59_ = 0.0;
			gdouble _tmp60_;
			gint _tmp61_;
			_tmp51_ = cr;
			_tmp52_ = self->priv->_arrowOrigin;
			_tmp53_ = y1;
			_tmp54_ = rise;
			cairo_line_to (_tmp51_, (gdouble) _tmp52_, (gdouble) (_tmp53_ - _tmp54_));
			_tmp55_ = cr;
			_tmp56_ = x1;
			_tmp57_ = borderRadius;
			_tmp58_ = self->priv->_arrowOrigin;
			_tmp59_ = fmax ((gdouble) (_tmp56_ + _tmp57_), (gdouble) _tmp58_);
			_tmp60_ = halfBase;
			_tmp61_ = y1;
			cairo_line_to (_tmp55_, _tmp59_ + _tmp60_, (gdouble) _tmp61_);
		} else {
			gint _tmp62_;
			gint _tmp63_;
			gint _tmp64_;
			gdouble _tmp65_;
			_tmp62_ = self->priv->_arrowOrigin;
			_tmp63_ = x2;
			_tmp64_ = borderRadius;
			_tmp65_ = halfBase;
			if (((gdouble) _tmp62_) > (_tmp63_ - (_tmp64_ + _tmp65_))) {
				cairo_t* _tmp66_;
				gint _tmp67_;
				gint _tmp68_;
				gint _tmp69_;
				gdouble _tmp70_ = 0.0;
				gdouble _tmp71_;
				gint _tmp72_;
				cairo_t* _tmp73_;
				gint _tmp74_;
				gint _tmp75_;
				gint _tmp76_;
				_tmp66_ = cr;
				_tmp67_ = x2;
				_tmp68_ = borderRadius;
				_tmp69_ = self->priv->_arrowOrigin;
				_tmp70_ = fmin ((gdouble) (_tmp67_ - _tmp68_), (gdouble) _tmp69_);
				_tmp71_ = halfBase;
				_tmp72_ = y1;
				cairo_line_to (_tmp66_, _tmp70_ - _tmp71_, (gdouble) _tmp72_);
				_tmp73_ = cr;
				_tmp74_ = self->priv->_arrowOrigin;
				_tmp75_ = y1;
				_tmp76_ = rise;
				cairo_line_to (_tmp73_, (gdouble) _tmp74_, (gdouble) (_tmp75_ - _tmp76_));
			} else {
				cairo_t* _tmp77_;
				gint _tmp78_;
				gdouble _tmp79_;
				gint _tmp80_;
				cairo_t* _tmp81_;
				gint _tmp82_;
				gint _tmp83_;
				gint _tmp84_;
				cairo_t* _tmp85_;
				gint _tmp86_;
				gdouble _tmp87_;
				gint _tmp88_;
				_tmp77_ = cr;
				_tmp78_ = self->priv->_arrowOrigin;
				_tmp79_ = halfBase;
				_tmp80_ = y1;
				cairo_line_to (_tmp77_, _tmp78_ - _tmp79_, (gdouble) _tmp80_);
				_tmp81_ = cr;
				_tmp82_ = self->priv->_arrowOrigin;
				_tmp83_ = y1;
				_tmp84_ = rise;
				cairo_line_to (_tmp81_, (gdouble) _tmp82_, (gdouble) (_tmp83_ - _tmp84_));
				_tmp85_ = cr;
				_tmp86_ = self->priv->_arrowOrigin;
				_tmp87_ = halfBase;
				_tmp88_ = y1;
				cairo_line_to (_tmp85_, _tmp86_ + _tmp87_, (gdouble) _tmp88_);
			}
		}
	}
	_tmp89_ = cr;
	_tmp90_ = x2;
	_tmp91_ = borderRadius;
	_tmp92_ = y1;
	cairo_line_to (_tmp89_, (gdouble) (_tmp90_ - _tmp91_), (gdouble) _tmp92_);
	_tmp93_ = cr;
	_tmp94_ = x2;
	_tmp95_ = borderRadius;
	_tmp96_ = y1;
	_tmp97_ = borderRadius;
	_tmp98_ = borderRadius;
	cairo_arc (_tmp93_, (gdouble) (_tmp94_ - _tmp95_), (gdouble) (_tmp96_ + _tmp97_), (gdouble) _tmp98_, (3 * G_PI) / 2, G_PI * 2);
	_tmp99_ = self->priv->_arrowSide;
	if (_tmp99_ == SIDE_RIGHT) {
		gint _tmp100_;
		gint _tmp101_;
		gint _tmp102_;
		gdouble _tmp103_;
		_tmp100_ = self->priv->_arrowOrigin;
		_tmp101_ = y1;
		_tmp102_ = borderRadius;
		_tmp103_ = halfBase;
		if (((gdouble) _tmp100_) < (_tmp101_ + (_tmp102_ + _tmp103_))) {
			cairo_t* _tmp104_;
			gint _tmp105_;
			gint _tmp106_;
			gint _tmp107_;
			cairo_t* _tmp108_;
			gint _tmp109_;
			gint _tmp110_;
			gint _tmp111_;
			gint _tmp112_;
			gdouble _tmp113_ = 0.0;
			gdouble _tmp114_;
			_tmp104_ = cr;
			_tmp105_ = x2;
			_tmp106_ = rise;
			_tmp107_ = self->priv->_arrowOrigin;
			cairo_line_to (_tmp104_, (gdouble) (_tmp105_ + _tmp106_), (gdouble) _tmp107_);
			_tmp108_ = cr;
			_tmp109_ = x2;
			_tmp110_ = y1;
			_tmp111_ = borderRadius;
			_tmp112_ = self->priv->_arrowOrigin;
			_tmp113_ = fmax ((gdouble) (_tmp110_ + _tmp111_), (gdouble) _tmp112_);
			_tmp114_ = halfBase;
			cairo_line_to (_tmp108_, (gdouble) _tmp109_, _tmp113_ + _tmp114_);
		} else {
			gint _tmp115_;
			gint _tmp116_;
			gint _tmp117_;
			gdouble _tmp118_;
			_tmp115_ = self->priv->_arrowOrigin;
			_tmp116_ = y2;
			_tmp117_ = borderRadius;
			_tmp118_ = halfBase;
			if (((gdouble) _tmp115_) > (_tmp116_ - (_tmp117_ + _tmp118_))) {
				cairo_t* _tmp119_;
				gint _tmp120_;
				gint _tmp121_;
				gint _tmp122_;
				gint _tmp123_;
				gdouble _tmp124_ = 0.0;
				gdouble _tmp125_;
				cairo_t* _tmp126_;
				gint _tmp127_;
				gint _tmp128_;
				gint _tmp129_;
				_tmp119_ = cr;
				_tmp120_ = x2;
				_tmp121_ = y2;
				_tmp122_ = borderRadius;
				_tmp123_ = self->priv->_arrowOrigin;
				_tmp124_ = fmin ((gdouble) (_tmp121_ - _tmp122_), (gdouble) _tmp123_);
				_tmp125_ = halfBase;
				cairo_line_to (_tmp119_, (gdouble) _tmp120_, _tmp124_ - _tmp125_);
				_tmp126_ = cr;
				_tmp127_ = x2;
				_tmp128_ = rise;
				_tmp129_ = self->priv->_arrowOrigin;
				cairo_line_to (_tmp126_, (gdouble) (_tmp127_ + _tmp128_), (gdouble) _tmp129_);
			} else {
				cairo_t* _tmp130_;
				gint _tmp131_;
				gint _tmp132_;
				gdouble _tmp133_;
				cairo_t* _tmp134_;
				gint _tmp135_;
				gint _tmp136_;
				gint _tmp137_;
				cairo_t* _tmp138_;
				gint _tmp139_;
				gint _tmp140_;
				gdouble _tmp141_;
				_tmp130_ = cr;
				_tmp131_ = x2;
				_tmp132_ = self->priv->_arrowOrigin;
				_tmp133_ = halfBase;
				cairo_line_to (_tmp130_, (gdouble) _tmp131_, _tmp132_ - _tmp133_);
				_tmp134_ = cr;
				_tmp135_ = x2;
				_tmp136_ = rise;
				_tmp137_ = self->priv->_arrowOrigin;
				cairo_line_to (_tmp134_, (gdouble) (_tmp135_ + _tmp136_), (gdouble) _tmp137_);
				_tmp138_ = cr;
				_tmp139_ = x2;
				_tmp140_ = self->priv->_arrowOrigin;
				_tmp141_ = halfBase;
				cairo_line_to (_tmp138_, (gdouble) _tmp139_, _tmp140_ + _tmp141_);
			}
		}
	}
	_tmp142_ = cr;
	_tmp143_ = x2;
	_tmp144_ = y2;
	_tmp145_ = borderRadius;
	cairo_line_to (_tmp142_, (gdouble) _tmp143_, (gdouble) (_tmp144_ - _tmp145_));
	_tmp146_ = cr;
	_tmp147_ = x2;
	_tmp148_ = borderRadius;
	_tmp149_ = y2;
	_tmp150_ = borderRadius;
	_tmp151_ = borderRadius;
	cairo_arc (_tmp146_, (gdouble) (_tmp147_ - _tmp148_), (gdouble) (_tmp149_ - _tmp150_), (gdouble) _tmp151_, (gdouble) 0, G_PI / 2);
	_tmp152_ = self->priv->_arrowSide;
	if (_tmp152_ == SIDE_BOTTOM) {
		gint _tmp153_;
		gint _tmp154_;
		gint _tmp155_;
		gdouble _tmp156_;
		_tmp153_ = self->priv->_arrowOrigin;
		_tmp154_ = x1;
		_tmp155_ = borderRadius;
		_tmp156_ = halfBase;
		if (((gdouble) _tmp153_) < (_tmp154_ + (_tmp155_ + _tmp156_))) {
			cairo_t* _tmp157_;
			gint _tmp158_;
			gint _tmp159_;
			gint _tmp160_;
			gdouble _tmp161_ = 0.0;
			gdouble _tmp162_;
			gint _tmp163_;
			cairo_t* _tmp164_;
			gint _tmp165_;
			gint _tmp166_;
			gint _tmp167_;
			_tmp157_ = cr;
			_tmp158_ = x1;
			_tmp159_ = borderRadius;
			_tmp160_ = self->priv->_arrowOrigin;
			_tmp161_ = fmax ((gdouble) (_tmp158_ + _tmp159_), (gdouble) _tmp160_);
			_tmp162_ = halfBase;
			_tmp163_ = y2;
			cairo_line_to (_tmp157_, _tmp161_ + _tmp162_, (gdouble) _tmp163_);
			_tmp164_ = cr;
			_tmp165_ = self->priv->_arrowOrigin;
			_tmp166_ = y2;
			_tmp167_ = rise;
			cairo_line_to (_tmp164_, (gdouble) _tmp165_, (gdouble) (_tmp166_ + _tmp167_));
		} else {
			gint _tmp168_;
			gint _tmp169_;
			gint _tmp170_;
			gdouble _tmp171_;
			_tmp168_ = self->priv->_arrowOrigin;
			_tmp169_ = x2;
			_tmp170_ = borderRadius;
			_tmp171_ = halfBase;
			if (((gdouble) _tmp168_) > (_tmp169_ - (_tmp170_ + _tmp171_))) {
				cairo_t* _tmp172_;
				gint _tmp173_;
				gint _tmp174_;
				gint _tmp175_;
				cairo_t* _tmp176_;
				gint _tmp177_;
				gint _tmp178_;
				gint _tmp179_;
				gdouble _tmp180_ = 0.0;
				gdouble _tmp181_;
				gint _tmp182_;
				_tmp172_ = cr;
				_tmp173_ = self->priv->_arrowOrigin;
				_tmp174_ = y2;
				_tmp175_ = rise;
				cairo_line_to (_tmp172_, (gdouble) _tmp173_, (gdouble) (_tmp174_ + _tmp175_));
				_tmp176_ = cr;
				_tmp177_ = x2;
				_tmp178_ = borderRadius;
				_tmp179_ = self->priv->_arrowOrigin;
				_tmp180_ = fmin ((gdouble) (_tmp177_ - _tmp178_), (gdouble) _tmp179_);
				_tmp181_ = halfBase;
				_tmp182_ = y2;
				cairo_line_to (_tmp176_, _tmp180_ - _tmp181_, (gdouble) _tmp182_);
			} else {
				cairo_t* _tmp183_;
				gint _tmp184_;
				gdouble _tmp185_;
				gint _tmp186_;
				cairo_t* _tmp187_;
				gint _tmp188_;
				gint _tmp189_;
				gint _tmp190_;
				cairo_t* _tmp191_;
				gint _tmp192_;
				gdouble _tmp193_;
				gint _tmp194_;
				_tmp183_ = cr;
				_tmp184_ = self->priv->_arrowOrigin;
				_tmp185_ = halfBase;
				_tmp186_ = y2;
				cairo_line_to (_tmp183_, _tmp184_ + _tmp185_, (gdouble) _tmp186_);
				_tmp187_ = cr;
				_tmp188_ = self->priv->_arrowOrigin;
				_tmp189_ = y2;
				_tmp190_ = rise;
				cairo_line_to (_tmp187_, (gdouble) _tmp188_, (gdouble) (_tmp189_ + _tmp190_));
				_tmp191_ = cr;
				_tmp192_ = self->priv->_arrowOrigin;
				_tmp193_ = halfBase;
				_tmp194_ = y2;
				cairo_line_to (_tmp191_, _tmp192_ - _tmp193_, (gdouble) _tmp194_);
			}
		}
	}
	_tmp195_ = cr;
	_tmp196_ = x1;
	_tmp197_ = borderRadius;
	_tmp198_ = y2;
	cairo_line_to (_tmp195_, (gdouble) (_tmp196_ + _tmp197_), (gdouble) _tmp198_);
	_tmp199_ = cr;
	_tmp200_ = x1;
	_tmp201_ = borderRadius;
	_tmp202_ = y2;
	_tmp203_ = borderRadius;
	_tmp204_ = borderRadius;
	cairo_arc (_tmp199_, (gdouble) (_tmp200_ + _tmp201_), (gdouble) (_tmp202_ - _tmp203_), (gdouble) _tmp204_, G_PI / 2, G_PI);
	_tmp205_ = self->priv->_arrowSide;
	if (_tmp205_ == SIDE_LEFT) {
		gint _tmp206_;
		gint _tmp207_;
		gint _tmp208_;
		gdouble _tmp209_;
		_tmp206_ = self->priv->_arrowOrigin;
		_tmp207_ = y1;
		_tmp208_ = borderRadius;
		_tmp209_ = halfBase;
		if (((gdouble) _tmp206_) < (_tmp207_ + (_tmp208_ + _tmp209_))) {
			cairo_t* _tmp210_;
			gint _tmp211_;
			gint _tmp212_;
			gint _tmp213_;
			gint _tmp214_;
			gdouble _tmp215_ = 0.0;
			gdouble _tmp216_;
			cairo_t* _tmp217_;
			gint _tmp218_;
			gint _tmp219_;
			gint _tmp220_;
			_tmp210_ = cr;
			_tmp211_ = x1;
			_tmp212_ = y1;
			_tmp213_ = borderRadius;
			_tmp214_ = self->priv->_arrowOrigin;
			_tmp215_ = fmax ((gdouble) (_tmp212_ + _tmp213_), (gdouble) _tmp214_);
			_tmp216_ = halfBase;
			cairo_line_to (_tmp210_, (gdouble) _tmp211_, _tmp215_ + _tmp216_);
			_tmp217_ = cr;
			_tmp218_ = x1;
			_tmp219_ = rise;
			_tmp220_ = self->priv->_arrowOrigin;
			cairo_line_to (_tmp217_, (gdouble) (_tmp218_ - _tmp219_), (gdouble) _tmp220_);
		} else {
			gint _tmp221_;
			gint _tmp222_;
			gint _tmp223_;
			gdouble _tmp224_;
			_tmp221_ = self->priv->_arrowOrigin;
			_tmp222_ = y2;
			_tmp223_ = borderRadius;
			_tmp224_ = halfBase;
			if (((gdouble) _tmp221_) > (_tmp222_ - (_tmp223_ + _tmp224_))) {
				cairo_t* _tmp225_;
				gint _tmp226_;
				gint _tmp227_;
				gint _tmp228_;
				cairo_t* _tmp229_;
				gint _tmp230_;
				gint _tmp231_;
				gint _tmp232_;
				gint _tmp233_;
				gdouble _tmp234_ = 0.0;
				gdouble _tmp235_;
				_tmp225_ = cr;
				_tmp226_ = x1;
				_tmp227_ = rise;
				_tmp228_ = self->priv->_arrowOrigin;
				cairo_line_to (_tmp225_, (gdouble) (_tmp226_ - _tmp227_), (gdouble) _tmp228_);
				_tmp229_ = cr;
				_tmp230_ = x1;
				_tmp231_ = y2;
				_tmp232_ = borderRadius;
				_tmp233_ = self->priv->_arrowOrigin;
				_tmp234_ = fmin ((gdouble) (_tmp231_ - _tmp232_), (gdouble) _tmp233_);
				_tmp235_ = halfBase;
				cairo_line_to (_tmp229_, (gdouble) _tmp230_, _tmp234_ - _tmp235_);
			} else {
				cairo_t* _tmp236_;
				gint _tmp237_;
				gint _tmp238_;
				gdouble _tmp239_;
				cairo_t* _tmp240_;
				gint _tmp241_;
				gint _tmp242_;
				gint _tmp243_;
				cairo_t* _tmp244_;
				gint _tmp245_;
				gint _tmp246_;
				gdouble _tmp247_;
				_tmp236_ = cr;
				_tmp237_ = x1;
				_tmp238_ = self->priv->_arrowOrigin;
				_tmp239_ = halfBase;
				cairo_line_to (_tmp236_, (gdouble) _tmp237_, _tmp238_ + _tmp239_);
				_tmp240_ = cr;
				_tmp241_ = x1;
				_tmp242_ = rise;
				_tmp243_ = self->priv->_arrowOrigin;
				cairo_line_to (_tmp240_, (gdouble) (_tmp241_ - _tmp242_), (gdouble) _tmp243_);
				_tmp244_ = cr;
				_tmp245_ = x1;
				_tmp246_ = self->priv->_arrowOrigin;
				_tmp247_ = halfBase;
				cairo_line_to (_tmp244_, (gdouble) _tmp245_, _tmp246_ - _tmp247_);
			}
		}
	}
	_tmp248_ = cr;
	_tmp249_ = x1;
	_tmp250_ = y1;
	_tmp251_ = borderRadius;
	cairo_line_to (_tmp248_, (gdouble) _tmp249_, (gdouble) (_tmp250_ + _tmp251_));
	_tmp252_ = cr;
	_tmp253_ = x1;
	_tmp254_ = borderRadius;
	_tmp255_ = y1;
	_tmp256_ = borderRadius;
	_tmp257_ = borderRadius;
	cairo_arc (_tmp252_, (gdouble) (_tmp253_ + _tmp254_), (gdouble) (_tmp255_ + _tmp256_), (gdouble) _tmp257_, G_PI, (3 * G_PI) / 2);
	_tmp258_ = cr;
	_tmp259_ = backgroundColor;
	clutter_cairo_set_source_color (_tmp258_, &_tmp259_);
	_tmp260_ = cr;
	cairo_fill_preserve (_tmp260_);
	_tmp261_ = cr;
	_tmp262_ = borderColor;
	clutter_cairo_set_source_color (_tmp261_, &_tmp262_);
	_tmp263_ = cr;
	_tmp264_ = borderWidth;
	cairo_set_line_width (_tmp263_, (gdouble) _tmp264_);
	_tmp265_ = cr;
	cairo_stroke (_tmp265_);
	_tmp266_ = gtk_bin_get_child ((GtkBin*) self);
	_tmp267_ = cr;
	gtk_container_propagate_draw ((GtkContainer*) self, _tmp266_, _tmp267_);
	result = FALSE;
	_cairo_destroy0 (cr);
	return result;
}


static GtkSizeRequestMode journal_round_box_real_get_request_mode (GtkWidget* base) {
	JournalRoundBox * self;
	GtkSizeRequestMode result = 0;
	self = (JournalRoundBox*) base;
	result = GTK_SIZE_REQUEST_HEIGHT_FOR_WIDTH;
	return result;
}


static void journal_round_box_real_get_preferred_width (GtkWidget* base, gint* min_width, gint* nat_width) {
	JournalRoundBox * self;
	gint _vala_min_width = 0;
	gint _vala_nat_width = 0;
	GtkWidget* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	gint _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
	self = (JournalRoundBox*) base;
	_tmp0_ = gtk_bin_get_child ((GtkBin*) self);
	gtk_widget_get_preferred_width (_tmp0_, &_tmp1_, &_tmp2_);
	_vala_min_width = _tmp1_;
	_vala_nat_width = _tmp2_;
	_tmp3_ = _vala_min_width;
	_tmp4_ = journal_round_box_BORDER_WIDTH;
	_vala_min_width = _tmp3_ + (_tmp4_ * 2);
	_tmp5_ = _vala_nat_width;
	_tmp6_ = journal_round_box_BORDER_WIDTH;
	_vala_nat_width = _tmp5_ + (_tmp6_ * 2);
	if (min_width) {
		*min_width = _vala_min_width;
	}
	if (nat_width) {
		*nat_width = _vala_nat_width;
	}
}


static void journal_round_box_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* min_height, gint* nat_height) {
	JournalRoundBox * self;
	gint _vala_min_height = 0;
	gint _vala_nat_height = 0;
	GtkWidget* _tmp0_ = NULL;
	gint _tmp1_;
	gint _tmp2_ = 0;
	gint _tmp3_ = 0;
	gint _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
	gint _tmp7_;
	self = (JournalRoundBox*) base;
	_tmp0_ = gtk_bin_get_child ((GtkBin*) self);
	_tmp1_ = width;
	gtk_widget_get_preferred_height_for_width (_tmp0_, _tmp1_, &_tmp2_, &_tmp3_);
	_vala_min_height = _tmp2_;
	_vala_nat_height = _tmp3_;
	_tmp4_ = _vala_min_height;
	_tmp5_ = journal_round_box_BORDER_WIDTH;
	_vala_min_height = _tmp4_ + (_tmp5_ * 2);
	_tmp6_ = _vala_nat_height;
	_tmp7_ = journal_round_box_BORDER_WIDTH;
	_vala_nat_height = _tmp6_ + (_tmp7_ * 2);
	if (min_height) {
		*min_height = _vala_min_height;
	}
	if (nat_height) {
		*nat_height = _vala_nat_height;
	}
}


Side journal_round_box_get_arrow_side (JournalRoundBox* self) {
	Side result;
	Side _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_arrowSide;
	result = _tmp0_;
	return result;
}


static void journal_round_box_class_init (JournalRoundBoxClass * klass) {
	journal_round_box_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalRoundBoxPrivate));
	GTK_WIDGET_CLASS (klass)->draw = journal_round_box_real_draw;
	GTK_WIDGET_CLASS (klass)->get_request_mode = journal_round_box_real_get_request_mode;
	GTK_WIDGET_CLASS (klass)->get_preferred_width = journal_round_box_real_get_preferred_width;
	GTK_WIDGET_CLASS (klass)->get_preferred_height_for_width = journal_round_box_real_get_preferred_height_for_width;
	G_OBJECT_CLASS (klass)->get_property = _vala_journal_round_box_get_property;
	G_OBJECT_CLASS (klass)->finalize = journal_round_box_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), JOURNAL_ROUND_BOX_ARROW_SIDE, g_param_spec_enum ("arrow-side", "arrow-side", "arrow-side", TYPE_SIDE, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void journal_round_box_instance_init (JournalRoundBox * self) {
	self->priv = JOURNAL_ROUND_BOX_GET_PRIVATE (self);
	self->priv->_arrowOrigin = 30;
}


static void journal_round_box_finalize (GObject* obj) {
	JournalRoundBox * self;
	self = JOURNAL_ROUND_BOX (obj);
	G_OBJECT_CLASS (journal_round_box_parent_class)->finalize (obj);
}


GType journal_round_box_get_type (void) {
	static volatile gsize journal_round_box_type_id__volatile = 0;
	if (g_once_init_enter (&journal_round_box_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalRoundBoxClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_round_box_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalRoundBox), 0, (GInstanceInitFunc) journal_round_box_instance_init, NULL };
		GType journal_round_box_type_id;
		journal_round_box_type_id = g_type_register_static (GTK_TYPE_FRAME, "JournalRoundBox", &g_define_type_info, 0);
		g_once_init_leave (&journal_round_box_type_id__volatile, journal_round_box_type_id);
	}
	return journal_round_box_type_id__volatile;
}


static void _vala_journal_round_box_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	JournalRoundBox * self;
	self = JOURNAL_ROUND_BOX (object);
	switch (property_id) {
		case JOURNAL_ROUND_BOX_ARROW_SIDE:
		g_value_set_enum (value, journal_round_box_get_arrow_side (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static Block3Data* block3_data_ref (Block3Data* _data3_) {
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		JournalRoundBoxContent * self;
		self = _data3_->self;
		_g_object_unref0 (_data3_->activity);
		_g_object_unref0 (self);
		g_slice_free (Block3Data, _data3_);
	}
}


static void __lambda9_ (Block3Data* _data3_) {
	JournalRoundBoxContent * self;
	JournalGenericActivity* _tmp0_;
	GdkPixbuf* _tmp1_;
	GdkPixbuf* _tmp2_;
	GdkPixbuf* _tmp3_;
	self = _data3_->self;
	_tmp0_ = _data3_->activity;
	_tmp1_ = journal_generic_activity_get_thumb_icon (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 (self->priv->thumb);
	self->priv->thumb = _tmp3_;
	self->priv->is_thumb = TRUE;
	gtk_widget_queue_resize ((GtkWidget*) self);
}


static void ___lambda9__journal_generic_activity_thumb_loaded (JournalGenericActivity* _sender, JournalGenericActivity* activity, gpointer self) {
	__lambda9_ (self);
}


JournalRoundBoxContent* journal_round_box_content_construct (GType object_type, JournalGenericActivity* activity) {
	JournalRoundBoxContent * self = NULL;
	Block3Data* _data3_;
	JournalGenericActivity* _tmp0_;
	JournalGenericActivity* _tmp1_;
	JournalGenericActivity* _tmp2_;
	JournalGenericActivity* _tmp3_;
	JournalGenericActivity* _tmp4_;
	GdkPixbuf* _tmp5_;
	GdkPixbuf* _tmp6_;
	GdkPixbuf* _tmp7_;
	JournalGenericActivity* _tmp8_;
	g_return_val_if_fail (activity != NULL, NULL);
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_tmp0_ = activity;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_data3_->activity = _tmp1_;
	self = (JournalRoundBoxContent*) g_object_new (object_type, NULL);
	_data3_->self = g_object_ref (self);
	_tmp2_ = _data3_->activity;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 (self->priv->activity);
	self->priv->activity = _tmp3_;
	_tmp4_ = _data3_->activity;
	_tmp5_ = journal_generic_activity_get_type_icon (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = _g_object_ref0 (_tmp6_);
	_g_object_unref0 (self->priv->thumb);
	self->priv->thumb = _tmp7_;
	self->priv->is_thumb = FALSE;
	gtk_widget_add_events ((GtkWidget*) self, (gint) ((GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK) | GDK_POINTER_MOTION_MASK));
	_tmp8_ = _data3_->activity;
	g_signal_connect_data (_tmp8_, "thumb-loaded", (GCallback) ___lambda9__journal_generic_activity_thumb_loaded, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	block3_data_unref (_data3_);
	_data3_ = NULL;
	return self;
}


JournalRoundBoxContent* journal_round_box_content_new (JournalGenericActivity* activity) {
	return journal_round_box_content_construct (JOURNAL_TYPE_ROUND_BOX_CONTENT, activity);
}


static gboolean journal_round_box_content_real_draw (GtkWidget* base, cairo_t* cr) {
	JournalRoundBoxContent * self;
	gboolean result = FALSE;
	gint _tmp0_ = 0;
	gint width;
	gint _tmp1_ = 0;
	gint height;
	gint x_pix;
	gint pad;
	gboolean _tmp2_;
	gint _tmp5_;
	GdkPixbuf* _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	gint y_pix;
	cairo_t* _tmp9_;
	cairo_t* _tmp10_;
	GdkPixbuf* _tmp11_;
	gint _tmp12_;
	cairo_t* _tmp13_;
	gint _tmp14_;
	GdkPixbuf* _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	GdkPixbuf* _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	cairo_t* _tmp21_;
	PangoRectangle rect = {0};
	PangoLayout* _tmp22_;
	PangoRectangle _tmp23_ = {0};
	GtkStyleContext* _tmp24_ = NULL;
	cairo_t* _tmp25_;
	gint _tmp26_;
	GdkPixbuf* _tmp27_;
	gint _tmp28_;
	gint _tmp29_;
	gint _tmp30_;
	gint _tmp31_;
	PangoRectangle _tmp32_;
	gint _tmp33_;
	PangoLayout* _tmp34_;
	PangoLayout* _tmp35_;
	PangoRectangle _tmp36_ = {0};
	GtkStyleContext* _tmp37_ = NULL;
	cairo_t* _tmp38_;
	gint _tmp39_;
	PangoRectangle _tmp40_;
	gint _tmp41_;
	gint _tmp42_;
	PangoRectangle _tmp43_;
	gint _tmp44_;
	PangoLayout* _tmp45_;
	self = (JournalRoundBoxContent*) base;
	g_return_val_if_fail (cr != NULL, FALSE);
	_tmp0_ = gtk_widget_get_allocated_width ((GtkWidget*) self);
	width = _tmp0_;
	_tmp1_ = gtk_widget_get_allocated_height ((GtkWidget*) self);
	height = _tmp1_;
	x_pix = 0;
	pad = 0;
	_tmp2_ = self->priv->is_thumb;
	if (_tmp2_ == TRUE) {
		gint _tmp3_;
		gint _tmp4_;
		_tmp3_ = journal_round_box_BORDER_WIDTH;
		x_pix = _tmp3_;
		_tmp4_ = x_pix;
		pad = JOURNAL_ROUND_BOX_CONTENT_x_padding + _tmp4_;
	}
	_tmp5_ = height;
	_tmp6_ = self->priv->thumb;
	_tmp7_ = gdk_pixbuf_get_height (_tmp6_);
	_tmp8_ = _tmp7_;
	y_pix = (_tmp5_ - _tmp8_) / 2;
	_tmp9_ = cr;
	cairo_set_operator (_tmp9_, CAIRO_OPERATOR_OVER);
	_tmp10_ = cr;
	_tmp11_ = self->priv->thumb;
	_tmp12_ = x_pix;
	gdk_cairo_set_source_pixbuf (_tmp10_, _tmp11_, (gdouble) _tmp12_, (gdouble) y_pix);
	_tmp13_ = cr;
	_tmp14_ = x_pix;
	_tmp15_ = self->priv->thumb;
	_tmp16_ = gdk_pixbuf_get_width (_tmp15_);
	_tmp17_ = _tmp16_;
	_tmp18_ = self->priv->thumb;
	_tmp19_ = gdk_pixbuf_get_height (_tmp18_);
	_tmp20_ = _tmp19_;
	cairo_rectangle (_tmp13_, (gdouble) _tmp14_, (gdouble) y_pix, (gdouble) _tmp17_, (gdouble) _tmp20_);
	_tmp21_ = cr;
	cairo_fill (_tmp21_);
	_tmp22_ = self->priv->title_layout;
	pango_layout_get_extents (_tmp22_, NULL, &_tmp23_);
	rect = _tmp23_;
	_tmp24_ = gtk_widget_get_style_context ((GtkWidget*) self);
	_tmp25_ = cr;
	_tmp26_ = x_pix;
	_tmp27_ = self->priv->thumb;
	_tmp28_ = gdk_pixbuf_get_width (_tmp27_);
	_tmp29_ = _tmp28_;
	_tmp30_ = pad;
	_tmp31_ = height;
	_tmp32_ = rect;
	_tmp33_ = _tmp32_.height;
	_tmp34_ = self->priv->title_layout;
	gtk_render_layout (_tmp24_, _tmp25_, (gdouble) ((_tmp26_ + _tmp29_) + _tmp30_), (gdouble) ((_tmp31_ - (_tmp33_ / PANGO_SCALE)) / 2), _tmp34_);
	_tmp35_ = self->priv->title_layout;
	pango_layout_get_extents (_tmp35_, NULL, &_tmp36_);
	rect = _tmp36_;
	_tmp37_ = gtk_widget_get_style_context ((GtkWidget*) self);
	_tmp38_ = cr;
	_tmp39_ = width;
	_tmp40_ = rect;
	_tmp41_ = _tmp40_.width;
	_tmp42_ = height;
	_tmp43_ = rect;
	_tmp44_ = _tmp43_.height;
	_tmp45_ = self->priv->time_layout;
	gtk_render_layout (_tmp37_, _tmp38_, (gdouble) (_tmp39_ - (_tmp41_ / PANGO_SCALE)), (gdouble) (_tmp42_ - (_tmp44_ / PANGO_SCALE)), _tmp45_);
	result = FALSE;
	return result;
}


static void journal_round_box_content_create_title_layout (JournalRoundBoxContent* self, gint width) {
	PangoRectangle rect = {0};
	gint f_width = 0;
	gint text_width = 0;
	PangoLayout* _tmp0_ = NULL;
	PangoLayout* layout;
	JournalGenericActivity* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	PangoAttrList* _tmp4_;
	PangoAttrList* attr_list;
	PangoAttrSize* _tmp5_;
	PangoAttrSize* attr_s;
	PangoAttrSize* _tmp6_;
	PangoAttrSize* _tmp7_;
	PangoAttrSize* _tmp8_;
	PangoAttrSize* _tmp9_;
	guint _tmp10_;
	JournalGenericActivity* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	PangoAttrSize* _tmp16_;
	PangoFontDescription* _tmp17_;
	PangoFontDescription* desc;
	PangoAttrFontDesc* _tmp18_;
	PangoAttrFontDesc* attr_f;
	PangoAttrFontDesc* _tmp19_;
	PangoRectangle _tmp20_ = {0};
	PangoRectangle _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
	GdkPixbuf* _tmp24_;
	gint _tmp25_;
	gint _tmp26_;
	gint p_width;
	gint _tmp27_ = 0;
	PangoLayout* _tmp28_;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_widget_create_pango_layout ((GtkWidget*) self, "");
	layout = _tmp0_;
	_tmp1_ = self->priv->activity;
	_tmp2_ = journal_generic_activity_get_title (_tmp1_);
	_tmp3_ = _tmp2_;
	pango_layout_set_text (layout, _tmp3_, -1);
	_tmp4_ = pango_attr_list_new ();
	attr_list = _tmp4_;
	_tmp5_ = (PangoAttrSize*) pango_attr_size_new (12 * PANGO_SCALE);
	attr_s = _tmp5_;
	_tmp6_ = attr_s;
	_tmp6_->absolute = (guint) 1;
	_tmp7_ = attr_s;
	((PangoAttribute*) _tmp7_)->start_index = (guint) 0;
	_tmp8_ = attr_s;
	_tmp9_ = attr_s;
	_tmp10_ = ((PangoAttribute*) _tmp9_)->start_index;
	_tmp11_ = self->priv->activity;
	_tmp12_ = journal_generic_activity_get_title (_tmp11_);
	_tmp13_ = _tmp12_;
	_tmp14_ = strlen (_tmp13_);
	_tmp15_ = _tmp14_;
	((PangoAttribute*) _tmp8_)->end_index = _tmp10_ + _tmp15_;
	_tmp16_ = attr_s;
	attr_s = NULL;
	pango_attr_list_insert (attr_list, (PangoAttribute*) _tmp16_);
	_tmp17_ = pango_font_description_new ();
	desc = _tmp17_;
	pango_font_description_set_weight (desc, PANGO_WEIGHT_BOLD);
	_tmp18_ = (PangoAttrFontDesc*) pango_attr_font_desc_new (desc);
	attr_f = _tmp18_;
	_tmp19_ = attr_f;
	attr_f = NULL;
	pango_attr_list_insert (attr_list, (PangoAttribute*) _tmp19_);
	pango_layout_set_wrap (layout, PANGO_WRAP_WORD_CHAR);
	pango_layout_set_attributes (layout, attr_list);
	pango_layout_get_extents (layout, NULL, &_tmp20_);
	rect = _tmp20_;
	_tmp21_ = rect;
	_tmp22_ = _tmp21_.width;
	text_width = _tmp22_;
	_tmp23_ = width;
	_tmp24_ = self->priv->thumb;
	_tmp25_ = gdk_pixbuf_get_width (_tmp24_);
	_tmp26_ = _tmp25_;
	p_width = ((_tmp23_ - JOURNAL_ROUND_BOX_CONTENT_x_padding) - _tmp26_) * PANGO_SCALE;
	_tmp27_ = MIN (p_width, text_width);
	f_width = _tmp27_;
	pango_layout_set_width (layout, f_width);
	_tmp28_ = _g_object_ref0 (layout);
	_g_object_unref0 (self->priv->title_layout);
	self->priv->title_layout = _tmp28_;
	_pango_attribute_destroy0 (attr_f);
	_pango_font_description_free0 (desc);
	_pango_attribute_destroy0 (attr_s);
	_pango_attr_list_unref0 (attr_list);
	_g_object_unref0 (layout);
}


static void journal_round_box_content_create_time_layout (JournalRoundBoxContent* self, gint width) {
	PangoLayout* _tmp0_ = NULL;
	PangoLayout* layout;
	JournalGenericActivity* _tmp1_;
	gint64 _tmp2_;
	gint64 _tmp3_;
	GDateTime* _tmp4_;
	GDateTime* _tmp5_;
	GDateTime* _tmp6_ = NULL;
	GDateTime* _tmp7_;
	GDateTime* date;
	gchar* _tmp8_ = NULL;
	gchar* date_s;
	PangoAttrList* _tmp9_;
	PangoAttrList* attr_list;
	PangoAttrSize* _tmp10_;
	PangoAttrSize* attr_s;
	PangoAttrSize* _tmp11_;
	PangoAttrSize* _tmp12_;
	PangoAttrSize* _tmp13_;
	PangoAttrSize* _tmp14_;
	guint _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	PangoAttrSize* _tmp18_;
	PangoFontDescription* _tmp19_;
	PangoFontDescription* desc;
	PangoAttrFontDesc* _tmp20_;
	PangoAttrFontDesc* attr_f;
	PangoAttrFontDesc* _tmp21_;
	PangoLayout* _tmp22_;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_widget_create_pango_layout ((GtkWidget*) self, "");
	layout = _tmp0_;
	_tmp1_ = self->priv->activity;
	_tmp2_ = journal_generic_activity_get_time (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = g_date_time_new_from_unix_utc (_tmp3_ / 1000);
	_tmp5_ = _tmp4_;
	_tmp6_ = g_date_time_to_local (_tmp5_);
	_tmp7_ = _tmp6_;
	_g_date_time_unref0 (_tmp5_);
	date = _tmp7_;
	_tmp8_ = g_date_time_format (date, "%Y-%m-%d %H:%M");
	date_s = _tmp8_;
	pango_layout_set_text (layout, date_s, -1);
	_tmp9_ = pango_attr_list_new ();
	attr_list = _tmp9_;
	_tmp10_ = (PangoAttrSize*) pango_attr_size_new (8 * PANGO_SCALE);
	attr_s = _tmp10_;
	_tmp11_ = attr_s;
	_tmp11_->absolute = (guint) 1;
	_tmp12_ = attr_s;
	((PangoAttribute*) _tmp12_)->start_index = (guint) 0;
	_tmp13_ = attr_s;
	_tmp14_ = attr_s;
	_tmp15_ = ((PangoAttribute*) _tmp14_)->start_index;
	_tmp16_ = strlen (date_s);
	_tmp17_ = _tmp16_;
	((PangoAttribute*) _tmp13_)->end_index = _tmp15_ + _tmp17_;
	_tmp18_ = attr_s;
	attr_s = NULL;
	pango_attr_list_insert (attr_list, (PangoAttribute*) _tmp18_);
	_tmp19_ = pango_font_description_new ();
	desc = _tmp19_;
	pango_font_description_set_style (desc, PANGO_STYLE_ITALIC);
	_tmp20_ = (PangoAttrFontDesc*) pango_attr_font_desc_new (desc);
	attr_f = _tmp20_;
	_tmp21_ = attr_f;
	attr_f = NULL;
	pango_attr_list_insert (attr_list, (PangoAttribute*) _tmp21_);
	pango_layout_set_wrap (layout, PANGO_WRAP_WORD_CHAR);
	pango_layout_set_attributes (layout, attr_list);
	_tmp22_ = _g_object_ref0 (layout);
	_g_object_unref0 (self->priv->time_layout);
	self->priv->time_layout = _tmp22_;
	_pango_attribute_destroy0 (attr_f);
	_pango_font_description_free0 (desc);
	_pango_attribute_destroy0 (attr_s);
	_pango_attr_list_unref0 (attr_list);
	_g_free0 (date_s);
	_g_date_time_unref0 (date);
	_g_object_unref0 (layout);
}


static GtkSizeRequestMode journal_round_box_content_real_get_request_mode (GtkWidget* base) {
	JournalRoundBoxContent * self;
	GtkSizeRequestMode result = 0;
	self = (JournalRoundBoxContent*) base;
	result = GTK_SIZE_REQUEST_HEIGHT_FOR_WIDTH;
	return result;
}


static void journal_round_box_content_real_get_preferred_width (GtkWidget* base, gint* minimum_width, gint* natural_width) {
	JournalRoundBoxContent * self;
	gint _vala_minimum_width = 0;
	gint _vala_natural_width = 0;
	self = (JournalRoundBoxContent*) base;
	_vala_natural_width = JOURNAL_ROUND_BOX_CONTENT_DEFAULT_WIDTH;
	_vala_minimum_width = _vala_natural_width;
	if (minimum_width) {
		*minimum_width = _vala_minimum_width;
	}
	if (natural_width) {
		*natural_width = _vala_natural_width;
	}
}


static void journal_round_box_content_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* minimum_height, gint* natural_height) {
	JournalRoundBoxContent * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	gint x_pix;
	gboolean _tmp0_;
	gint _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	PangoRectangle r = {0};
	PangoRectangle r2 = {0};
	PangoLayout* _tmp6_;
	PangoRectangle _tmp7_ = {0};
	PangoLayout* _tmp8_;
	PangoRectangle _tmp9_ = {0};
	GdkPixbuf* _tmp10_;
	gint _tmp11_;
	gint _tmp12_;
	PangoRectangle _tmp13_;
	gint _tmp14_;
	PangoRectangle _tmp15_;
	gint _tmp16_;
	gint _tmp17_ = 0;
	self = (JournalRoundBoxContent*) base;
	x_pix = 0;
	_tmp0_ = self->priv->is_thumb;
	if (_tmp0_ == TRUE) {
		gint _tmp1_;
		_tmp1_ = journal_round_box_BORDER_WIDTH;
		x_pix = _tmp1_;
	}
	_tmp2_ = width;
	_tmp3_ = x_pix;
	journal_round_box_content_create_title_layout (self, _tmp2_ - _tmp3_);
	_tmp4_ = width;
	_tmp5_ = x_pix;
	journal_round_box_content_create_time_layout (self, _tmp4_ - _tmp5_);
	_tmp6_ = self->priv->time_layout;
	pango_layout_get_extents (_tmp6_, NULL, &_tmp7_);
	r = _tmp7_;
	_tmp8_ = self->priv->title_layout;
	pango_layout_get_extents (_tmp8_, NULL, &_tmp9_);
	r2 = _tmp9_;
	_tmp10_ = self->priv->thumb;
	_tmp11_ = gdk_pixbuf_get_height (_tmp10_);
	_tmp12_ = _tmp11_;
	_tmp13_ = r;
	_tmp14_ = _tmp13_.height;
	_tmp15_ = r2;
	_tmp16_ = _tmp15_.height;
	_tmp17_ = MAX (_tmp12_, ((gint) (_tmp14_ + _tmp16_)) / PANGO_SCALE);
	_vala_natural_height = _tmp17_;
	_vala_minimum_height = _vala_natural_height;
	if (minimum_height) {
		*minimum_height = _vala_minimum_height;
	}
	if (natural_height) {
		*natural_height = _vala_natural_height;
	}
}


static void journal_round_box_content_class_init (JournalRoundBoxContentClass * klass) {
	journal_round_box_content_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (JournalRoundBoxContentPrivate));
	GTK_WIDGET_CLASS (klass)->draw = journal_round_box_content_real_draw;
	GTK_WIDGET_CLASS (klass)->get_request_mode = journal_round_box_content_real_get_request_mode;
	GTK_WIDGET_CLASS (klass)->get_preferred_width = journal_round_box_content_real_get_preferred_width;
	GTK_WIDGET_CLASS (klass)->get_preferred_height_for_width = journal_round_box_content_real_get_preferred_height_for_width;
	G_OBJECT_CLASS (klass)->finalize = journal_round_box_content_finalize;
}


static void journal_round_box_content_instance_init (JournalRoundBoxContent * self) {
	self->priv = JOURNAL_ROUND_BOX_CONTENT_GET_PRIVATE (self);
}


static void journal_round_box_content_finalize (GObject* obj) {
	JournalRoundBoxContent * self;
	self = JOURNAL_ROUND_BOX_CONTENT (obj);
	_g_object_unref0 (self->priv->activity);
	_g_object_unref0 (self->priv->thumb);
	_g_object_unref0 (self->priv->title_layout);
	_g_object_unref0 (self->priv->time_layout);
	G_OBJECT_CLASS (journal_round_box_content_parent_class)->finalize (obj);
}


GType journal_round_box_content_get_type (void) {
	static volatile gsize journal_round_box_content_type_id__volatile = 0;
	if (g_once_init_enter (&journal_round_box_content_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (JournalRoundBoxContentClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) journal_round_box_content_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (JournalRoundBoxContent), 0, (GInstanceInitFunc) journal_round_box_content_instance_init, NULL };
		GType journal_round_box_content_type_id;
		journal_round_box_content_type_id = g_type_register_static (GTK_TYPE_DRAWING_AREA, "JournalRoundBoxContent", &g_define_type_info, 0);
		g_once_init_leave (&journal_round_box_content_type_id__volatile, journal_round_box_content_type_id);
	}
	return journal_round_box_content_type_id__volatile;
}



